import{c as sa,g as ca}from"./vendor-XsefVKpj.js";var Bn={exports:{}},la=Bn.exports,Er;function fa(){return Er||(Er=1,(function(Kr,da){(function(rn,Mn){Kr.exports=Mn()})(la,(function(){/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var rn=function(e,n){return rn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},rn(e,n)};function Mn(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");rn(e,n);function t(){this.constructor=e}e.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}var C=function(){return C=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n},C.apply(this,arguments)};function an(e,n,t){for(var r=0,i=n.length,a;r<i;r++)(a||!(r in n))&&(a||(a=Array.prototype.slice.call(n,0,r)),a[r]=n[r]);return e.concat(a||Array.prototype.slice.call(n))}var U=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:sa,W=Object.keys,V=Array.isArray;typeof Promise<"u"&&!U.Promise&&(U.Promise=Promise);function G(e,n){return typeof n!="object"||W(n).forEach(function(t){e[t]=n[t]}),e}var Pe=Object.getPrototypeOf,Ar={}.hasOwnProperty;function Q(e,n){return Ar.call(e,n)}function De(e,n){typeof n=="function"&&(n=n(Pe(e))),(typeof Reflect>"u"?W:Reflect.ownKeys)(n).forEach(function(t){se(e,t,n[t])})}var Pt=Object.defineProperty;function se(e,n,t,r){Pt(e,n,G(t&&Q(t,"get")&&typeof t.get=="function"?{get:t.get,set:t.set,configurable:!0}:{value:t,configurable:!0,writable:!0},r))}function Te(e){return{from:function(n){return e.prototype=Object.create(n.prototype),se(e.prototype,"constructor",e),{extend:De.bind(null,e.prototype)}}}}var kr=Object.getOwnPropertyDescriptor;function Dt(e,n){var t=kr(e,n),r;return t||(r=Pe(e))&&Dt(r,n)}var Or=[].slice;function un(e,n,t){return Or.call(e,n,t)}function Tt(e,n){return n(e)}function Ve(e){if(!e)throw new Error("Assertion Failed")}function Ct(e){U.setImmediate?setImmediate(e):setTimeout(e,0)}function Pr(e,n){return e.reduce(function(t,r,i){var a=n(r,i);return a&&(t[a[0]]=a[1]),t},{})}function ie(e,n){if(typeof n=="string"&&Q(e,n))return e[n];if(!n)return e;if(typeof n!="string"){for(var t=[],r=0,i=n.length;r<i;++r){var a=ie(e,n[r]);t.push(a)}return t}var u=n.indexOf(".");if(u!==-1){var o=e[n.substr(0,u)];return o==null?void 0:ie(o,n.substr(u+1))}}function X(e,n,t){if(!(!e||n===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof n!="string"&&"length"in n){Ve(typeof t!="string"&&"length"in t);for(var r=0,i=n.length;r<i;++r)X(e,n[r],t[r])}else{var a=n.indexOf(".");if(a!==-1){var u=n.substr(0,a),o=n.substr(a+1);if(o==="")t===void 0?V(e)&&!isNaN(parseInt(u))?e.splice(u,1):delete e[u]:e[u]=t;else{var s=e[u];(!s||!Q(e,u))&&(s=e[u]={}),X(s,o,t)}}else t===void 0?V(e)&&!isNaN(parseInt(n))?e.splice(n,1):delete e[n]:e[n]=t}}function Dr(e,n){typeof n=="string"?X(e,n,void 0):"length"in n&&[].map.call(n,function(t){X(e,t,void 0)})}function It(e){var n={};for(var t in e)Q(e,t)&&(n[t]=e[t]);return n}var Tr=[].concat;function Rt(e){return Tr.apply([],e)}var Cr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Rt([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(n){return n+e+"Array"})}))).filter(function(e){return U[e]}),Bt=new Set(Cr.map(function(e){return U[e]}));function Mt(e){var n={};for(var t in e)if(Q(e,t)){var r=e[t];n[t]=!r||typeof r!="object"||Bt.has(r.constructor)?r:Mt(r)}return n}function Ir(e){for(var n in e)if(Q(e,n))return!1;return!0}var ze=null;function ge(e){ze=new WeakMap;var n=Fn(e);return ze=null,n}function Fn(e){if(!e||typeof e!="object")return e;var n=ze.get(e);if(n)return n;if(V(e)){n=[],ze.set(e,n);for(var t=0,r=e.length;t<r;++t)n.push(Fn(e[t]))}else if(Bt.has(e.constructor))n=e;else{var i=Pe(e);n=i===Object.prototype?{}:Object.create(i),ze.set(e,n);for(var a in e)Q(e,a)&&(n[a]=Fn(e[a]))}return n}var Rr={}.toString;function jn(e){return Rr.call(e).slice(8,-1)}var Ln=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Br=typeof Ln=="symbol"?function(e){var n;return e!=null&&(n=e[Ln])&&n.apply(e)}:function(){return null};function be(e,n){var t=e.indexOf(n);return t>=0&&e.splice(t,1),t>=0}var Ce={};function ae(e){var n,t,r,i;if(arguments.length===1){if(V(e))return e.slice();if(this===Ce&&typeof e=="string")return[e];if(i=Br(e)){for(t=[];r=i.next(),!r.done;)t.push(r.value);return t}if(e==null)return[e];if(n=e.length,typeof n=="number"){for(t=new Array(n);n--;)t[n]=e[n];return t}return[e]}for(n=arguments.length,t=new Array(n);n--;)t[n]=arguments[n];return t}var Nn=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Mr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Ft=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Vn=Mr.concat(Ft),Fr={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ie(e,n){this.name=e,this.message=n}Te(Ie).from(Error).extend({toString:function(){return this.name+": "+this.message}});function jt(e,n){return e+". Errors: "+Object.keys(n).map(function(t){return n[t].toString()}).filter(function(t,r,i){return i.indexOf(t)===r}).join(`
`)}function on(e,n,t,r){this.failures=n,this.failedKeys=r,this.successCount=t,this.message=jt(e,n)}Te(on).from(Ie);function Re(e,n){this.name="BulkError",this.failures=Object.keys(n).map(function(t){return n[t]}),this.failuresByPos=n,this.message=jt(e,this.failures)}Te(Re).from(Ie);var zn=Vn.reduce(function(e,n){return e[n]=n+"Error",e},{}),jr=Ie,P=Vn.reduce(function(e,n){var t=n+"Error";function r(i,a){this.name=t,i?typeof i=="string"?(this.message="".concat(i).concat(a?`
 `+a:""),this.inner=a||null):typeof i=="object"&&(this.message="".concat(i.name," ").concat(i.message),this.inner=i):(this.message=Fr[n]||t,this.inner=null)}return Te(r).from(jr),e[n]=r,e},{});P.Syntax=SyntaxError,P.Type=TypeError,P.Range=RangeError;var Lt=Ft.reduce(function(e,n){return e[n+"Error"]=P[n],e},{});function Lr(e,n){if(!e||e instanceof Ie||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Lt[e.name])return e;var t=new Lt[e.name](n||e.message,e);return"stack"in e&&se(t,"stack",{get:function(){return this.inner.stack}}),t}var sn=Vn.reduce(function(e,n){return["Syntax","Type","Range"].indexOf(n)===-1&&(e[n+"Error"]=P[n]),e},{});sn.ModifyError=on,sn.DexieError=Ie,sn.BulkError=Re;function F(){}function We(e){return e}function Nr(e,n){return e==null||e===We?n:function(t){return n(e(t))}}function we(e,n){return function(){e.apply(this,arguments),n.apply(this,arguments)}}function Vr(e,n){return e===F?n:function(){var t=e.apply(this,arguments);t!==void 0&&(arguments[0]=t);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=n.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?we(r,this.onsuccess):r),i&&(this.onerror=this.onerror?we(i,this.onerror):i),a!==void 0?a:t}}function zr(e,n){return e===F?n:function(){e.apply(this,arguments);var t=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,n.apply(this,arguments),t&&(this.onsuccess=this.onsuccess?we(t,this.onsuccess):t),r&&(this.onerror=this.onerror?we(r,this.onerror):r)}}function Wr(e,n){return e===F?n:function(t){var r=e.apply(this,arguments);G(t,r);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var u=n.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?we(i,this.onsuccess):i),a&&(this.onerror=this.onerror?we(a,this.onerror):a),r===void 0?u===void 0?void 0:u:G(r,u)}}function Yr(e,n){return e===F?n:function(){return n.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function Wn(e,n){return e===F?n:function(){var t=e.apply(this,arguments);if(t&&typeof t.then=="function"){for(var r=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return t.then(function(){return n.apply(r,a)})}return n.apply(this,arguments)}}var ne=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Nt(e,n){ne=e}var Ye={},Vt=100,Yn=typeof Promise>"u"?[]:(function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,Pe(e),e];var n=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[n,Pe(n),e]})(),zt=Yn[0],Wt=Yn[1],Ur=Yn[2],$r=Wt&&Wt.then,_e=zt&&zt.constructor,Un=!!Ur;function Qr(){queueMicrotask(Gr)}var Ue=function(e,n){$e.push([e,n]),cn&&(Qr(),cn=!1)},$n=!0,cn=!0,xe=[],ln=[],Qn=We,ce={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:F,pgp:!1,env:{},finalize:F},k=ce,$e=[],Ee=0,fn=[];function K(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var n=this._PSD=k;if(typeof e!="function"){if(e!==Ye)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Gn(this,this._value);return}this._state=null,this._value=null,++n.ref,Ut(this,e)}var Hn={get:function(){var e=k,n=pn;function t(r,i){var a=this,u=!e.global&&(e!==k||n!==pn),o=u&&!fe(),s=new K(function(c,h){Xn(a,new Yt(Ht(r,e,u,o),Ht(i,e,u,o),c,h,e))});return this._consoleTask&&(s._consoleTask=this._consoleTask),s}return t.prototype=Ye,t},set:function(e){se(this,"then",e&&e.prototype===Ye?Hn:{get:function(){return e},set:Hn.set})}};De(K.prototype,{then:Hn,_then:function(e,n){Xn(this,new Yt(null,null,e,n,k))},catch:function(e){if(arguments.length===1)return this.then(null,e);var n=arguments[0],t=arguments[1];return typeof n=="function"?this.then(null,function(r){return r instanceof n?t(r):hn(r)}):this.then(null,function(r){return r&&r.name===n?t(r):hn(r)})},finally:function(e){return this.then(function(n){return K.resolve(e()).then(function(){return n})},function(n){return K.resolve(e()).then(function(){return hn(n)})})},timeout:function(e,n){var t=this;return e<1/0?new K(function(r,i){var a=setTimeout(function(){return i(new P.Timeout(n))},e);t.then(r,i).finally(clearTimeout.bind(null,a))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&se(K.prototype,Symbol.toStringTag,"Dexie.Promise"),ce.env=Qt();function Yt(e,n,t,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof n=="function"?n:null,this.resolve=t,this.reject=r,this.psd=i}De(K,{all:function(){var e=ae.apply(null,arguments).map(yn);return new K(function(n,t){e.length===0&&n([]);var r=e.length;e.forEach(function(i,a){return K.resolve(i).then(function(u){e[a]=u,--r||n(e)},t)})})},resolve:function(e){if(e instanceof K)return e;if(e&&typeof e.then=="function")return new K(function(t,r){e.then(t,r)});var n=new K(Ye,!0,e);return n},reject:hn,race:function(){var e=ae.apply(null,arguments).map(yn);return new K(function(n,t){e.map(function(r){return K.resolve(r).then(n,t)})})},PSD:{get:function(){return k},set:function(e){return k=e}},totalEchoes:{get:function(){return pn}},newPSD:le,usePSD:Se,scheduler:{get:function(){return Ue},set:function(e){Ue=e}},rejectionMapper:{get:function(){return Qn},set:function(e){Qn=e}},follow:function(e,n){return new K(function(t,r){return le(function(i,a){var u=k;u.unhandleds=[],u.onunhandled=a,u.finalize=we(function(){var o=this;Xr(function(){o.unhandleds.length===0?i():a(o.unhandleds[0])})},u.finalize),e()},n,t,r)})}}),_e&&(_e.allSettled&&se(K,"allSettled",function(){var e=ae.apply(null,arguments).map(yn);return new K(function(n){e.length===0&&n([]);var t=e.length,r=new Array(t);e.forEach(function(i,a){return K.resolve(i).then(function(u){return r[a]={status:"fulfilled",value:u}},function(u){return r[a]={status:"rejected",reason:u}}).then(function(){return--t||n(r)})})})}),_e.any&&typeof AggregateError<"u"&&se(K,"any",function(){var e=ae.apply(null,arguments).map(yn);return new K(function(n,t){e.length===0&&t(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(a,u){return K.resolve(a).then(function(o){return n(o)},function(o){i[u]=o,--r||t(new AggregateError(i))})})})}),_e.withResolvers&&(K.withResolvers=_e.withResolvers));function Ut(e,n){try{n(function(t){if(e._state===null){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&Be();t&&typeof t.then=="function"?Ut(e,function(i,a){t instanceof K?t._then(i,a):t.then(i,a)}):(e._state=!0,e._value=t,$t(e)),r&&Me()}},Gn.bind(null,e))}catch(t){Gn(e,t)}}function Gn(e,n){if(ln.push(n),e._state===null){var t=e._lib&&Be();n=Qn(n),e._state=!1,e._value=n,Jr(e),$t(e),t&&Me()}}function $t(e){var n=e._listeners;e._listeners=[];for(var t=0,r=n.length;t<r;++t)Xn(e,n[t]);var i=e._PSD;--i.ref||i.finalize(),Ee===0&&(++Ee,Ue(function(){--Ee===0&&Jn()},[]))}function Xn(e,n){if(e._state===null){e._listeners.push(n);return}var t=e._state?n.onFulfilled:n.onRejected;if(t===null)return(e._state?n.resolve:n.reject)(e._value);++n.psd.ref,++Ee,Ue(Hr,[t,e,n])}function Hr(e,n,t){try{var r,i=n._value;!n._state&&ln.length&&(ln=[]),r=ne&&n._consoleTask?n._consoleTask.run(function(){return e(i)}):e(i),!n._state&&ln.indexOf(i)===-1&&Zr(n),t.resolve(r)}catch(a){t.reject(a)}finally{--Ee===0&&Jn(),--t.psd.ref||t.psd.finalize()}}function Gr(){Se(ce,function(){Be()&&Me()})}function Be(){var e=$n;return $n=!1,cn=!1,e}function Me(){var e,n,t;do for(;$e.length>0;)for(e=$e,$e=[],t=e.length,n=0;n<t;++n){var r=e[n];r[0].apply(null,r[1])}while($e.length>0);$n=!0,cn=!0}function Jn(){var e=xe;xe=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var n=fn.slice(0),t=n.length;t;)n[--t]()}function Xr(e){function n(){e(),fn.splice(fn.indexOf(n),1)}fn.push(n),++Ee,Ue(function(){--Ee===0&&Jn()},[])}function Jr(e){xe.some(function(n){return n._value===e._value})||xe.push(e)}function Zr(e){for(var n=xe.length;n;)if(xe[--n]._value===e._value){xe.splice(n,1);return}}function hn(e){return new K(Ye,!1,e)}function N(e,n){var t=k;return function(){var r=Be(),i=k;try{return he(t,!0),e.apply(this,arguments)}catch(a){n&&n(a)}finally{he(i,!1),r&&Me()}}}var Y={awaits:0,echoes:0,id:0},qr=0,dn=[],vn=0,pn=0,ei=0;function le(e,n,t,r){var i=k,a=Object.create(i);a.parent=i,a.ref=0,a.global=!1,a.id=++ei,ce.env,a.env=Un?{Promise:K,PromiseProp:{value:K,configurable:!0,writable:!0},all:K.all,race:K.race,allSettled:K.allSettled,any:K.any,resolve:K.resolve,reject:K.reject}:{},n&&G(a,n),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=Se(a,e,t,r);return a.ref===0&&a.finalize(),u}function Fe(){return Y.id||(Y.id=++qr),++Y.awaits,Y.echoes+=Vt,Y.id}function fe(){return Y.awaits?(--Y.awaits===0&&(Y.id=0),Y.echoes=Y.awaits*Vt,!0):!1}(""+$r).indexOf("[native code]")===-1&&(Fe=fe=F);function yn(e){return Y.echoes&&e&&e.constructor===_e?(Fe(),e.then(function(n){return fe(),n},function(n){return fe(),z(n)})):e}function ni(e){++pn,(!Y.echoes||--Y.echoes===0)&&(Y.echoes=Y.awaits=Y.id=0),dn.push(k),he(e,!0)}function ti(){var e=dn[dn.length-1];dn.pop(),he(e,!1)}function he(e,n){var t=k;if((n?Y.echoes&&(!vn++||e!==k):vn&&(!--vn||e!==k))&&queueMicrotask(n?ni.bind(null,e):ti),e!==k&&(k=e,t===ce&&(ce.env=Qt()),Un)){var r=ce.env.Promise,i=e.env;(t.global||e.global)&&(Object.defineProperty(U,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Qt(){var e=U.Promise;return Un?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(U,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Se(e,n,t,r,i){var a=k;try{return he(e,!0),n(t,r,i)}finally{he(a,!1)}}function Ht(e,n,t,r){return typeof e!="function"?e:function(){var i=k;t&&Fe(),he(n,!0);try{return e.apply(this,arguments)}finally{he(i,!1),r&&queueMicrotask(fe)}}}function Zn(e){Promise===_e&&Y.echoes===0?vn===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}var z=K.reject;function qn(e,n,t,r){if(!e.idbdb||!e._state.openComplete&&!k.letThrough&&!e._vip){if(e._state.openComplete)return z(new P.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return z(new P.DatabaseClosed);e.open().catch(F)}return e._state.dbReadyPromise.then(function(){return qn(e,n,t,r)})}else{var i=e._createTransaction(n,t,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(a){return a.name===zn.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return qn(e,n,t,r)})):z(a)}return i._promise(n,function(a,u){return le(function(){return k.trans=i,r(a,u,i)})}).then(function(a){if(n==="readwrite")try{i.idbtrans.commit()}catch{}return n==="readonly"?a:i._completion.then(function(){return a})})}}var Gt="4.2.0",Ke="￿",et=-1/0,ue="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Xt="String expected.",je=[],mn="__dbnames",nt="readonly",tt="readwrite";function Ae(e,n){return e?n?function(){return e.apply(this,arguments)&&n.apply(this,arguments)}:e:n}var Jt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function gn(e){return typeof e=="string"&&!/\./.test(e)?function(n){return n[e]===void 0&&e in n&&(n=ge(n),delete n[e]),n}:function(n){return n}}function Zt(){throw P.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function B(e,n){try{var t=qt(e),r=qt(n);if(t!==r)return t==="Array"?1:r==="Array"?-1:t==="binary"?1:r==="binary"?-1:t==="string"?1:r==="string"?-1:t==="Date"?1:r!=="Date"?NaN:-1;switch(t){case"number":case"Date":case"string":return e>n?1:e<n?-1:0;case"binary":return ii(er(e),er(n));case"Array":return ri(e,n)}}catch{}return NaN}function ri(e,n){for(var t=e.length,r=n.length,i=t<r?t:r,a=0;a<i;++a){var u=B(e[a],n[a]);if(u!==0)return u}return t===r?0:t<r?-1:1}function ii(e,n){for(var t=e.length,r=n.length,i=t<r?t:r,a=0;a<i;++a)if(e[a]!==n[a])return e[a]<n[a]?-1:1;return t===r?0:t<r?-1:1}function qt(e){var n=typeof e;if(n!=="object")return n;if(ArrayBuffer.isView(e))return"binary";var t=jn(e);return t==="ArrayBuffer"?"binary":t}function er(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function bn(e,n,t){var r=e.schema.yProps;return r?(n&&t.numFailures>0&&(n=n.filter(function(i,a){return!t.failures[a]})),Promise.all(r.map(function(i){var a=i.updatesTable;return n?e.db.table(a).where("k").anyOf(n).delete():e.db.table(a).clear()})).then(function(){return t})):t}var nr=(function(){function e(){}return e.prototype._trans=function(n,t,r){var i=this._tx||k.trans,a=this.name,u=ne&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(n==="readonly"?"read":"write"," ").concat(this.name));function o(h,l,v){if(!v.schema[a])throw new P.NotFound("Table "+a+" not part of transaction");return t(v.idbtrans,v)}var s=Be();try{var c=i&&i.db._novip===this.db._novip?i===k.trans?i._promise(n,o,r):le(function(){return i._promise(n,o,r)},{trans:i,transless:k.transless||k}):qn(this.db,n,[this.name],o);return u&&(c._consoleTask=u,c=c.catch(function(h){return console.trace(h),z(h)})),c}finally{s&&Me()}},e.prototype.get=function(n,t){var r=this;return n&&n.constructor===Object?this.where(n).first(t):n==null?z(new P.Type("Invalid argument to Table.get()")):this._trans("readonly",function(i){return r.core.get({trans:i,key:n}).then(function(a){return r.hook.reading.fire(a)})}).then(t)},e.prototype.where=function(n){if(typeof n=="string")return new this.db.WhereClause(this,n);if(V(n))return new this.db.WhereClause(this,"[".concat(n.join("+"),"]"));var t=W(n);if(t.length===1)return this.where(t[0]).equals(n[t[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(h){if(h.compound&&t.every(function(v){return h.keyPath.indexOf(v)>=0})){for(var l=0;l<t.length;++l)if(t.indexOf(h.keyPath[l])===-1)return!1;return!0}return!1}).sort(function(h,l){return h.keyPath.length-l.keyPath.length})[0];if(r&&this.db._maxKey!==Ke){var i=r.keyPath.slice(0,t.length);return this.where(i).equals(i.map(function(h){return n[h]}))}!r&&ne&&console.warn("The query ".concat(JSON.stringify(n)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var a=this.schema.idxByName;function u(h,l){return B(h,l)===0}var o=t.reduce(function(h,l){var v=h[0],_=h[1],f=a[l],d=n[l];return[v||f,v||!f?Ae(_,f&&f.multi?function(p){var g=ie(p,l);return V(g)&&g.some(function(b){return u(d,b)})}:function(p){return u(d,ie(p,l))}):_]},[null,null]),s=o[0],c=o[1];return s?this.where(s.name).equals(n[s.keyPath]).filter(c):r?this.filter(c):this.where(t).equals("")},e.prototype.filter=function(n){return this.toCollection().and(n)},e.prototype.count=function(n){return this.toCollection().count(n)},e.prototype.offset=function(n){return this.toCollection().offset(n)},e.prototype.limit=function(n){return this.toCollection().limit(n)},e.prototype.each=function(n){return this.toCollection().each(n)},e.prototype.toArray=function(n){return this.toCollection().toArray(n)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(n){return new this.db.Collection(new this.db.WhereClause(this,V(n)?"[".concat(n.join("+"),"]"):n))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(n){var t=this,r=t.db,i=t.name;this.schema.mappedClass=n,n.prototype instanceof Zt&&(n=(function(s){Mn(c,s);function c(){return s!==null&&s.apply(this,arguments)||this}return Object.defineProperty(c.prototype,"db",{get:function(){return r},enumerable:!1,configurable:!0}),c.prototype.table=function(){return i},c})(n));for(var a=new Set,u=n.prototype;u;u=Pe(u))Object.getOwnPropertyNames(u).forEach(function(s){return a.add(s)});var o=function(s){if(!s)return s;var c=Object.create(n.prototype);for(var h in s)if(!a.has(h))try{c[h]=s[h]}catch{}return c};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=o,this.hook("reading",o),n},e.prototype.defineClass=function(){function n(t){G(this,t)}return this.mapToClass(n)},e.prototype.add=function(n,t){var r=this,i=this.schema.primKey,a=i.auto,u=i.keyPath,o=n;return u&&a&&(o=gn(u)(n)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"add",keys:t!=null?[t]:null,values:[o]})}).then(function(s){return s.numFailures?K.reject(s.failures[0]):s.lastResult}).then(function(s){if(u)try{X(n,u,s)}catch{}return s})},e.prototype.update=function(n,t){if(typeof n=="object"&&!V(n)){var r=ie(n,this.schema.primKey.keyPath);return r===void 0?z(new P.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(r).modify(t)}else return this.where(":id").equals(n).modify(t)},e.prototype.put=function(n,t){var r=this,i=this.schema.primKey,a=i.auto,u=i.keyPath,o=n;return u&&a&&(o=gn(u)(n)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"put",values:[o],keys:t!=null?[t]:null})}).then(function(s){return s.numFailures?K.reject(s.failures[0]):s.lastResult}).then(function(s){if(u)try{X(n,u,s)}catch{}return s})},e.prototype.delete=function(n){var t=this;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:[n]}).then(function(i){return bn(t,[n],i)}).then(function(i){return i.numFailures?K.reject(i.failures[0]):void 0})})},e.prototype.clear=function(){var n=this;return this._trans("readwrite",function(t){return n.core.mutate({trans:t,type:"deleteRange",range:Jt}).then(function(r){return bn(n,null,r)})}).then(function(t){return t.numFailures?K.reject(t.failures[0]):void 0})},e.prototype.bulkGet=function(n){var t=this;return this._trans("readonly",function(r){return t.core.getMany({keys:n,trans:r}).then(function(i){return i.map(function(a){return t.hook.reading.fire(a)})})})},e.prototype.bulkAdd=function(n,t,r){var i=this,a=Array.isArray(t)?t:void 0;r=r||(a?void 0:t);var u=r?r.allKeys:void 0;return this._trans("readwrite",function(o){var s=i.schema.primKey,c=s.auto,h=s.keyPath;if(h&&a)throw new P.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==n.length)throw new P.InvalidArgument("Arguments objects and keys must have the same length");var l=n.length,v=h&&c?n.map(gn(h)):n;return i.core.mutate({trans:o,type:"add",keys:a,values:v,wantResults:u}).then(function(_){var f=_.numFailures,d=_.results,p=_.lastResult,g=_.failures,b=u?d:p;if(f===0)return b;throw new Re("".concat(i.name,".bulkAdd(): ").concat(f," of ").concat(l," operations failed"),g)})})},e.prototype.bulkPut=function(n,t,r){var i=this,a=Array.isArray(t)?t:void 0;r=r||(a?void 0:t);var u=r?r.allKeys:void 0;return this._trans("readwrite",function(o){var s=i.schema.primKey,c=s.auto,h=s.keyPath;if(h&&a)throw new P.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==n.length)throw new P.InvalidArgument("Arguments objects and keys must have the same length");var l=n.length,v=h&&c?n.map(gn(h)):n;return i.core.mutate({trans:o,type:"put",keys:a,values:v,wantResults:u}).then(function(_){var f=_.numFailures,d=_.results,p=_.lastResult,g=_.failures,b=u?d:p;if(f===0)return b;throw new Re("".concat(i.name,".bulkPut(): ").concat(f," of ").concat(l," operations failed"),g)})})},e.prototype.bulkUpdate=function(n){var t=this,r=this.core,i=n.map(function(o){return o.key}),a=n.map(function(o){return o.changes}),u=[];return this._trans("readwrite",function(o){return r.getMany({trans:o,keys:i,cache:"clone"}).then(function(s){var c=[],h=[];n.forEach(function(v,_){var f=v.key,d=v.changes,p=s[_];if(p){for(var g=0,b=Object.keys(d);g<b.length;g++){var y=b[g],w=d[y];if(y===t.schema.primKey.keyPath){if(B(w,f)!==0)throw new P.Constraint("Cannot update primary key in bulkUpdate()")}else X(p,y,w)}u.push(_),c.push(f),h.push(p)}});var l=c.length;return r.mutate({trans:o,type:"put",keys:c,values:h,updates:{keys:i,changeSpecs:a}}).then(function(v){var _=v.numFailures,f=v.failures;if(_===0)return l;for(var d=0,p=Object.keys(f);d<p.length;d++){var g=p[d],b=u[Number(g)];if(b!=null){var y=f[g];delete f[g],f[b]=y}}throw new Re("".concat(t.name,".bulkUpdate(): ").concat(_," of ").concat(l," operations failed"),f)})})})},e.prototype.bulkDelete=function(n){var t=this,r=n.length;return this._trans("readwrite",function(i){return t.core.mutate({trans:i,type:"delete",keys:n}).then(function(a){return bn(t,n,a)})}).then(function(i){var a=i.numFailures,u=i.lastResult,o=i.failures;if(a===0)return u;throw new Re("".concat(t.name,".bulkDelete(): ").concat(a," of ").concat(r," operations failed"),o)})},e})();function Qe(e){var n={},t=function(o,s){if(s){for(var c=arguments.length,h=new Array(c-1);--c;)h[c-1]=arguments[c];return n[o].subscribe.apply(null,h),e}else if(typeof o=="string")return n[o]};t.addEventType=a;for(var r=1,i=arguments.length;r<i;++r)a(arguments[r]);return t;function a(o,s,c){if(typeof o=="object")return u(o);s||(s=Yr),c||(c=F);var h={subscribers:[],fire:c,subscribe:function(l){h.subscribers.indexOf(l)===-1&&(h.subscribers.push(l),h.fire=s(h.fire,l))},unsubscribe:function(l){h.subscribers=h.subscribers.filter(function(v){return v!==l}),h.fire=h.subscribers.reduce(s,c)}};return n[o]=t[o]=h,h}function u(o){W(o).forEach(function(s){var c=o[s];if(V(c))a(s,o[s][0],o[s][1]);else if(c==="asap")var h=a(s,We,function(){for(var v=arguments.length,_=new Array(v);v--;)_[v]=arguments[v];h.subscribers.forEach(function(f){Ct(function(){f.apply(null,_)})})});else throw new P.InvalidArgument("Invalid event config")})}}function He(e,n){return Te(n).from({prototype:e}),n}function ai(e){return He(nr.prototype,function(t,r,i){this.db=e,this._tx=i,this.name=t,this.schema=r,this.hook=e._allTables[t]?e._allTables[t].hook:Qe(null,{creating:[Vr,F],reading:[Nr,We],updating:[Wr,F],deleting:[zr,F]})})}function Le(e,n){return!(e.filter||e.algorithm||e.or)&&(n?e.justLimit:!e.replayFilter)}function rt(e,n){e.filter=Ae(e.filter,n)}function it(e,n,t){var r=e.replayFilter;e.replayFilter=r?function(){return Ae(r(),n())}:n,e.justLimit=t&&!r}function ui(e,n){e.isMatch=Ae(e.isMatch,n)}function wn(e,n){if(e.isPrimKey)return n.primaryKey;var t=n.getIndexByKeyPath(e.index);if(!t)throw new P.Schema("KeyPath "+e.index+" on object store "+n.name+" is not indexed");return t}function tr(e,n,t){var r=wn(e,n.schema);return n.openCursor({trans:t,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function _n(e,n,t,r){var i=e.replayFilter?Ae(e.filter,e.replayFilter()):e.filter;if(e.or){var a={},u=function(o,s,c){if(!i||i(s,c,function(v){return s.stop(v)},function(v){return s.fail(v)})){var h=s.primaryKey,l=""+h;l==="[object ArrayBuffer]"&&(l=""+new Uint8Array(h)),Q(a,l)||(a[l]=!0,n(o,s,c))}};return Promise.all([e.or._iterate(u,t),rr(tr(e,r,t),e.algorithm,u,!e.keysOnly&&e.valueMapper)])}else return rr(tr(e,r,t),Ae(e.algorithm,i),n,!e.keysOnly&&e.valueMapper)}function rr(e,n,t,r){var i=r?function(u,o,s){return t(r(u),o,s)}:t,a=N(i);return e.then(function(u){if(u)return u.start(function(){var o=function(){return u.continue()};(!n||n(u,function(s){return o=s},function(s){u.stop(s),o=F},function(s){u.fail(s),o=F}))&&a(u.value,u,function(s){return o=s}),o()})})}var Ge=(function(){function e(n){this["@@propmod"]=n}return e.prototype.execute=function(n){var t,r=this["@@propmod"];if(r.add!==void 0){var i=r.add;if(V(i))return an(an([],V(n)?n:[],!0),i).sort();if(typeof i=="number")return(Number(n)||0)+i;if(typeof i=="bigint")try{return BigInt(n)+i}catch{return BigInt(0)+i}throw new TypeError("Invalid term ".concat(i))}if(r.remove!==void 0){var a=r.remove;if(V(a))return V(n)?n.filter(function(o){return!a.includes(o)}).sort():[];if(typeof a=="number")return Number(n)-a;if(typeof a=="bigint")try{return BigInt(n)-a}catch{return BigInt(0)-a}throw new TypeError("Invalid subtrahend ".concat(a))}var u=(t=r.replacePrefix)===null||t===void 0?void 0:t[0];return u&&typeof n=="string"&&n.startsWith(u)?r.replacePrefix[1]+n.substring(u.length):n},e})(),oi=(function(){function e(){}return e.prototype._read=function(n,t){var r=this._ctx;return r.error?r.table._trans(null,z.bind(null,r.error)):r.table._trans("readonly",n).then(t)},e.prototype._write=function(n){var t=this._ctx;return t.error?t.table._trans(null,z.bind(null,t.error)):t.table._trans("readwrite",n,"locked")},e.prototype._addAlgorithm=function(n){var t=this._ctx;t.algorithm=Ae(t.algorithm,n)},e.prototype._iterate=function(n,t){return _n(this._ctx,n,t,this._ctx.table.core)},e.prototype.clone=function(n){var t=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return n&&G(r,n),t._ctx=r,t},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(n){var t=this._ctx;return this._read(function(r){return _n(t,n,r,t.table.core)})},e.prototype.count=function(n){var t=this;return this._read(function(r){var i=t._ctx,a=i.table.core;if(Le(i,!0))return a.count({trans:r,query:{index:wn(i,a.schema),range:i.range}}).then(function(o){return Math.min(o,i.limit)});var u=0;return _n(i,function(){return++u,!1},r,a).then(function(){return u})}).then(n)},e.prototype.sortBy=function(n,t){var r=n.split(".").reverse(),i=r[0],a=r.length-1;function u(c,h){return h?u(c[r[h]],h-1):c[i]}var o=this._ctx.dir==="next"?1:-1;function s(c,h){var l=u(c,a),v=u(h,a);return B(l,v)*o}return this.toArray(function(c){return c.sort(s)}).then(t)},e.prototype.toArray=function(n){var t=this;return this._read(function(r){var i=t._ctx;if(i.dir==="next"&&Le(i,!0)&&i.limit>0){var a=i.valueMapper,u=wn(i,i.table.core.schema);return i.table.core.query({trans:r,limit:i.limit,values:!0,query:{index:u,range:i.range}}).then(function(s){var c=s.result;return a?c.map(a):c})}else{var o=[];return _n(i,function(s){return o.push(s)},r,i.table.core).then(function(){return o})}},n)},e.prototype.offset=function(n){var t=this._ctx;return n<=0?this:(t.offset+=n,Le(t)?it(t,function(){var r=n;return function(i,a){return r===0?!0:r===1?(--r,!1):(a(function(){i.advance(r),r=0}),!1)}}):it(t,function(){var r=n;return function(){return--r<0}}),this)},e.prototype.limit=function(n){return this._ctx.limit=Math.min(this._ctx.limit,n),it(this._ctx,function(){var t=n;return function(r,i,a){return--t<=0&&i(a),t>=0}},!0),this},e.prototype.until=function(n,t){return rt(this._ctx,function(r,i,a){return n(r.value)?(i(a),t):!0}),this},e.prototype.first=function(n){return this.limit(1).toArray(function(t){return t[0]}).then(n)},e.prototype.last=function(n){return this.reverse().first(n)},e.prototype.filter=function(n){return rt(this._ctx,function(t){return n(t.value)}),ui(this._ctx,n),this},e.prototype.and=function(n){return this.filter(n)},e.prototype.or=function(n){return new this.db.WhereClause(this._ctx.table,n,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(n){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(r,i){n(i.key,i)})},e.prototype.eachUniqueKey=function(n){return this._ctx.unique="unique",this.eachKey(n)},e.prototype.eachPrimaryKey=function(n){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(r,i){n(i.primaryKey,i)})},e.prototype.keys=function(n){var t=this._ctx;t.keysOnly=!t.isMatch;var r=[];return this.each(function(i,a){r.push(a.key)}).then(function(){return r}).then(n)},e.prototype.primaryKeys=function(n){var t=this._ctx;if(t.dir==="next"&&Le(t,!0)&&t.limit>0)return this._read(function(i){var a=wn(t,t.table.core.schema);return t.table.core.query({trans:i,values:!1,limit:t.limit,query:{index:a,range:t.range}})}).then(function(i){var a=i.result;return a}).then(n);t.keysOnly=!t.isMatch;var r=[];return this.each(function(i,a){r.push(a.primaryKey)}).then(function(){return r}).then(n)},e.prototype.uniqueKeys=function(n){return this._ctx.unique="unique",this.keys(n)},e.prototype.firstKey=function(n){return this.limit(1).keys(function(t){return t[0]}).then(n)},e.prototype.lastKey=function(n){return this.reverse().firstKey(n)},e.prototype.distinct=function(){var n=this._ctx,t=n.index&&n.table.schema.idxByName[n.index];if(!t||!t.multi)return this;var r={};return rt(this._ctx,function(i){var a=i.primaryKey.toString(),u=Q(r,a);return r[a]=!0,!u}),this},e.prototype.modify=function(n){var t=this,r=this._ctx;return this._write(function(i){var a;if(typeof n=="function")a=n;else{var u=W(n),o=u.length;a=function(y){for(var w=!1,m=0;m<o;++m){var x=u[m],S=n[x],E=ie(y,x);S instanceof Ge?(X(y,x,S.execute(E)),w=!0):E!==S&&(X(y,x,S),w=!0)}return w}}var s=r.table.core,c=s.schema.primaryKey,h=c.outbound,l=c.extractKey,v=200,_=t.db._options.modifyChunkSize;_&&(typeof _=="object"?v=_[s.name]||_["*"]||200:v=_);var f=[],d=0,p=[],g=function(y,w){var m=w.failures,x=w.numFailures;d+=y-x;for(var S=0,E=W(m);S<E.length;S++){var D=E[S];f.push(m[D])}},b=n===ir;return t.clone().primaryKeys().then(function(y){var w=Le(r)&&r.limit===1/0&&(typeof n!="function"||b)&&{index:r.index,range:r.range},m=function(x){var S=Math.min(v,y.length-x),E=y.slice(x,x+S);return(b?Promise.resolve([]):s.getMany({trans:i,keys:E,cache:"immutable"})).then(function(D){var I=[],A=[],R=h?[]:null,O=b?E:[];if(!b)for(var M=0;M<S;++M){var T=D[M],j={value:ge(T),primKey:y[x+M]};a.call(j,j.value,j)!==!1&&(j.value==null?O.push(y[x+M]):!h&&B(l(T),l(j.value))!==0?(O.push(y[x+M]),I.push(j.value)):(A.push(j.value),h&&R.push(y[x+M])))}return Promise.resolve(I.length>0&&s.mutate({trans:i,type:"add",values:I}).then(function(L){for(var Z in L.failures)O.splice(parseInt(Z),1);g(I.length,L)})).then(function(){return(A.length>0||w&&typeof n=="object")&&s.mutate({trans:i,type:"put",keys:R,values:A,criteria:w,changeSpec:typeof n!="function"&&n,isAdditionalChunk:x>0}).then(function(L){return g(A.length,L)})}).then(function(){return(O.length>0||w&&b)&&s.mutate({trans:i,type:"delete",keys:O,criteria:w,isAdditionalChunk:x>0}).then(function(L){return bn(r.table,O,L)}).then(function(L){return g(O.length,L)})}).then(function(){return y.length>x+S&&m(x+v)})})};return m(0).then(function(){if(f.length>0)throw new on("Error modifying one or more objects",f,d,p);return y.length})})})},e.prototype.delete=function(){var n=this._ctx,t=n.range;return Le(n)&&!n.table.schema.yProps&&(n.isPrimKey||t.type===3)?this._write(function(r){var i=n.table.core.schema.primaryKey,a=t;return n.table.core.count({trans:r,query:{index:i,range:a}}).then(function(u){return n.table.core.mutate({trans:r,type:"deleteRange",range:a}).then(function(o){var s=o.failures,c=o.numFailures;if(c)throw new on("Could not delete some values",Object.keys(s).map(function(h){return s[h]}),u-c);return u-c})})}):this.modify(ir)},e})(),ir=function(e,n){return n.value=null};function si(e){return He(oi.prototype,function(t,r){this.db=e;var i=Jt,a=null;if(r)try{i=r()}catch(c){a=c}var u=t._ctx,o=u.table,s=o.hook.reading.fire;this._ctx={table:o,index:u.index,isPrimKey:!u.index||o.schema.primKey.keyPath&&u.index===o.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:a,or:u.or,valueMapper:s!==We?s:null}})}function ci(e,n){return e<n?-1:e===n?0:1}function li(e,n){return e>n?-1:e===n?0:1}function J(e,n,t){var r=e instanceof ur?new e.Collection(e):e;return r._ctx.error=t?new t(n):new TypeError(n),r}function Ne(e){return new e.Collection(e,function(){return ar("")}).limit(0)}function fi(e){return e==="next"?function(n){return n.toUpperCase()}:function(n){return n.toLowerCase()}}function hi(e){return e==="next"?function(n){return n.toLowerCase()}:function(n){return n.toUpperCase()}}function di(e,n,t,r,i,a){for(var u=Math.min(e.length,r.length),o=-1,s=0;s<u;++s){var c=n[s];if(c!==r[s])return i(e[s],t[s])<0?e.substr(0,s)+t[s]+t.substr(s+1):i(e[s],r[s])<0?e.substr(0,s)+r[s]+t.substr(s+1):o>=0?e.substr(0,o)+n[o]+t.substr(o+1):null;i(e[s],c)<0&&(o=s)}return u<r.length&&a==="next"?e+t.substr(e.length):u<e.length&&a==="prev"?e.substr(0,t.length):o<0?null:e.substr(0,o)+r[o]+t.substr(o+1)}function xn(e,n,t,r){var i,a,u,o,s,c,h,l=t.length;if(!t.every(function(d){return typeof d=="string"}))return J(e,Xt);function v(d){i=fi(d),a=hi(d),u=d==="next"?ci:li;var p=t.map(function(g){return{lower:a(g),upper:i(g)}}).sort(function(g,b){return u(g.lower,b.lower)});o=p.map(function(g){return g.upper}),s=p.map(function(g){return g.lower}),c=d,h=d==="next"?"":r}v("next");var _=new e.Collection(e,function(){return de(o[0],s[l-1]+r)});_._ondirectionchange=function(d){v(d)};var f=0;return _._addAlgorithm(function(d,p,g){var b=d.key;if(typeof b!="string")return!1;var y=a(b);if(n(y,s,f))return!0;for(var w=null,m=f;m<l;++m){var x=di(b,y,o[m],s[m],u,c);x===null&&w===null?f=m+1:(w===null||u(w,x)>0)&&(w=x)}return p(w!==null?function(){d.continue(w+h)}:g),!1}),_}function de(e,n,t,r){return{type:2,lower:e,upper:n,lowerOpen:t,upperOpen:r}}function ar(e){return{type:1,lower:e,upper:e}}var ur=(function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(n,t,r,i){r=r!==!1,i=i===!0;try{return this._cmp(n,t)>0||this._cmp(n,t)===0&&(r||i)&&!(r&&i)?Ne(this):new this.Collection(this,function(){return de(n,t,!r,!i)})}catch{return J(this,ue)}},e.prototype.equals=function(n){return n==null?J(this,ue):new this.Collection(this,function(){return ar(n)})},e.prototype.above=function(n){return n==null?J(this,ue):new this.Collection(this,function(){return de(n,void 0,!0)})},e.prototype.aboveOrEqual=function(n){return n==null?J(this,ue):new this.Collection(this,function(){return de(n,void 0,!1)})},e.prototype.below=function(n){return n==null?J(this,ue):new this.Collection(this,function(){return de(void 0,n,!1,!0)})},e.prototype.belowOrEqual=function(n){return n==null?J(this,ue):new this.Collection(this,function(){return de(void 0,n)})},e.prototype.startsWith=function(n){return typeof n!="string"?J(this,Xt):this.between(n,n+Ke,!0,!0)},e.prototype.startsWithIgnoreCase=function(n){return n===""?this.startsWith(n):xn(this,function(t,r){return t.indexOf(r[0])===0},[n],Ke)},e.prototype.equalsIgnoreCase=function(n){return xn(this,function(t,r){return t===r[0]},[n],"")},e.prototype.anyOfIgnoreCase=function(){var n=ae.apply(Ce,arguments);return n.length===0?Ne(this):xn(this,function(t,r){return r.indexOf(t)!==-1},n,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var n=ae.apply(Ce,arguments);return n.length===0?Ne(this):xn(this,function(t,r){return r.some(function(i){return t.indexOf(i)===0})},n,Ke)},e.prototype.anyOf=function(){var n=this,t=ae.apply(Ce,arguments),r=this._cmp;try{t.sort(r)}catch{return J(this,ue)}if(t.length===0)return Ne(this);var i=new this.Collection(this,function(){return de(t[0],t[t.length-1])});i._ondirectionchange=function(u){r=u==="next"?n._ascending:n._descending,t.sort(r)};var a=0;return i._addAlgorithm(function(u,o,s){for(var c=u.key;r(c,t[a])>0;)if(++a,a===t.length)return o(s),!1;return r(c,t[a])===0?!0:(o(function(){u.continue(t[a])}),!1)}),i},e.prototype.notEqual=function(n){return this.inAnyRange([[et,n],[n,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var n=ae.apply(Ce,arguments);if(n.length===0)return new this.Collection(this);try{n.sort(this._ascending)}catch{return J(this,ue)}var t=n.reduce(function(r,i){return r?r.concat([[r[r.length-1][1],i]]):[[et,i]]},null);return t.push([n[n.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(n,t){var r=this,i=this._cmp,a=this._ascending,u=this._descending,o=this._min,s=this._max;if(n.length===0)return Ne(this);if(!n.every(function(m){return m[0]!==void 0&&m[1]!==void 0&&a(m[0],m[1])<=0}))return J(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",P.InvalidArgument);var c=!t||t.includeLowers!==!1,h=t&&t.includeUppers===!0;function l(m,x){for(var S=0,E=m.length;S<E;++S){var D=m[S];if(i(x[0],D[1])<0&&i(x[1],D[0])>0){D[0]=o(D[0],x[0]),D[1]=s(D[1],x[1]);break}}return S===E&&m.push(x),m}var v=a;function _(m,x){return v(m[0],x[0])}var f;try{f=n.reduce(l,[]),f.sort(_)}catch{return J(this,ue)}var d=0,p=h?function(m){return a(m,f[d][1])>0}:function(m){return a(m,f[d][1])>=0},g=c?function(m){return u(m,f[d][0])>0}:function(m){return u(m,f[d][0])>=0};function b(m){return!p(m)&&!g(m)}var y=p,w=new this.Collection(this,function(){return de(f[0][0],f[f.length-1][1],!c,!h)});return w._ondirectionchange=function(m){m==="next"?(y=p,v=a):(y=g,v=u),f.sort(_)},w._addAlgorithm(function(m,x,S){for(var E=m.key;y(E);)if(++d,d===f.length)return x(S),!1;return b(E)?!0:(r._cmp(E,f[d][1])===0||r._cmp(E,f[d][0])===0||x(function(){v===a?m.continue(f[d][0]):m.continue(f[d][1])}),!1)}),w},e.prototype.startsWithAnyOf=function(){var n=ae.apply(Ce,arguments);return n.every(function(t){return typeof t=="string"})?n.length===0?Ne(this):this.inAnyRange(n.map(function(t){return[t,t+Ke]})):J(this,"startsWithAnyOf() only works with strings")},e})();function vi(e){return He(ur.prototype,function(t,r,i){if(this.db=e,this._ctx={table:t,index:r===":id"?null:r,or:i},this._cmp=this._ascending=B,this._descending=function(a,u){return B(u,a)},this._max=function(a,u){return B(a,u)>0?a:u},this._min=function(a,u){return B(a,u)<0?a:u},this._IDBKeyRange=e._deps.IDBKeyRange,!this._IDBKeyRange)throw new P.MissingAPI})}function te(e){return N(function(n){return Xe(n),e(n.target.error),!1})}function Xe(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Je="storagemutated",at="x-storagemutated-1",ve=Qe(null,Je),pi=(function(){function e(){}return e.prototype._lock=function(){return Ve(!k.global),++this._reculock,this._reculock===1&&!k.global&&(k.lockOwnerFor=this),this},e.prototype._unlock=function(){if(Ve(!k.global),--this._reculock===0)for(k.global||(k.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var n=this._blockedFuncs.shift();try{Se(n[1],n[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&k.lockOwnerFor!==this},e.prototype.create=function(n){var t=this;if(!this.mode)return this;var r=this.db.idbdb,i=this.db._state.dbOpenError;if(Ve(!this.idbtrans),!n&&!r)switch(i&&i.name){case"DatabaseClosedError":throw new P.DatabaseClosed(i);case"MissingAPIError":throw new P.MissingAPI(i.message,i);default:throw new P.OpenFailed(i)}if(!this.active)throw new P.TransactionInactive;return Ve(this._completion._state===null),n=this.idbtrans=n||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),n.onerror=N(function(a){Xe(a),t._reject(n.error)}),n.onabort=N(function(a){Xe(a),t.active&&t._reject(new P.Abort(n.error)),t.active=!1,t.on("abort").fire(a)}),n.oncomplete=N(function(){t.active=!1,t._resolve(),"mutatedParts"in n&&ve.storagemutated.fire(n.mutatedParts)}),this},e.prototype._promise=function(n,t,r){var i=this;if(n==="readwrite"&&this.mode!=="readwrite")return z(new P.ReadOnly("Transaction is readonly"));if(!this.active)return z(new P.TransactionInactive);if(this._locked())return new K(function(u,o){i._blockedFuncs.push([function(){i._promise(n,t,r).then(u,o)},k])});if(r)return le(function(){var u=new K(function(o,s){i._lock();var c=t(o,s,i);c&&c.then&&c.then(o,s)});return u.finally(function(){return i._unlock()}),u._lib=!0,u});var a=new K(function(u,o){var s=t(u,o,i);s&&s.then&&s.then(u,o)});return a._lib=!0,a},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(n){var t=this._root(),r=K.resolve(n);if(t._waitingFor)t._waitingFor=t._waitingFor.then(function(){return r});else{t._waitingFor=r,t._waitingQueue=[];var i=t.idbtrans.objectStore(t.storeNames[0]);(function u(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(i.get(-1/0).onsuccess=u)})()}var a=t._waitingFor;return new K(function(u,o){r.then(function(s){return t._waitingQueue.push(N(u.bind(null,s)))},function(s){return t._waitingQueue.push(N(o.bind(null,s)))}).finally(function(){t._waitingFor===a&&(t._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new P.Abort))},e.prototype.table=function(n){var t=this._memoizedTables||(this._memoizedTables={});if(Q(t,n))return t[n];var r=this.schema[n];if(!r)throw new P.NotFound("Table "+n+" not part of transaction");var i=new this.db.Table(n,r,this);return i.core=this.db.core.table(n),t[n]=i,i},e})();function yi(e){return He(pi.prototype,function(t,r,i,a,u){var o=this;t!=="readonly"&&r.forEach(function(s){var c,h=(c=i[s])===null||c===void 0?void 0:c.yProps;h&&(r=r.concat(h.map(function(l){return l.updatesTable})))}),this.db=e,this.mode=t,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=a,this.idbtrans=null,this.on=Qe(this,"complete","error","abort"),this.parent=u||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new K(function(s,c){o._resolve=s,o._reject=c}),this._completion.then(function(){o.active=!1,o.on.complete.fire()},function(s){var c=o.active;return o.active=!1,o.on.error.fire(s),o.parent?o.parent._reject(s):c&&o.idbtrans&&o.idbtrans.abort(),z(s)})})}function ut(e,n,t,r,i,a,u,o){return{name:e,keyPath:n,unique:t,multi:r,auto:i,compound:a,src:(t&&!u?"&":"")+(r?"*":"")+(i?"++":"")+or(n),type:o}}function or(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function ot(e,n,t){return{name:e,primKey:n,indexes:t,mappedClass:null,idxByName:Pr(t,function(r){return[r.name,r]})}}function mi(e){return e.length===1?e[0]:e}var Ze=function(e){try{return e.only([[]]),Ze=function(){return[[]]},[[]]}catch{return Ze=function(){return Ke},Ke}};function st(e){return e==null?function(){}:typeof e=="string"?gi(e):function(n){return ie(n,e)}}function gi(e){var n=e.split(".");return n.length===1?function(t){return t[e]}:function(t){return ie(t,e)}}function sr(e){return[].slice.call(e)}var bi=0;function qe(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function wi(e,n,t){function r(l,v){var _=sr(l.objectStoreNames);return{schema:{name:l.name,tables:_.map(function(f){return v.objectStore(f)}).map(function(f){var d=f.keyPath,p=f.autoIncrement,g=V(d),b=d==null,y={},w={name:f.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:b,compound:g,keyPath:d,autoIncrement:p,unique:!0,extractKey:st(d)},indexes:sr(f.indexNames).map(function(m){return f.index(m)}).map(function(m){var x=m.name,S=m.unique,E=m.multiEntry,D=m.keyPath,I=V(D),A={name:x,compound:I,keyPath:D,unique:S,multiEntry:E,extractKey:st(D)};return y[qe(D)]=A,A}),getIndexByKeyPath:function(m){return y[qe(m)]}};return y[":id"]=w.primaryKey,d!=null&&(y[qe(d)]=w.primaryKey),w})},hasGetAll:_.length>0&&"getAll"in v.objectStore(_[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var v=l.lower,_=l.upper,f=l.lowerOpen,d=l.upperOpen,p=v===void 0?_===void 0?null:n.upperBound(_,!!d):_===void 0?n.lowerBound(v,!!f):n.bound(v,_,!!f,!!d);return p}function a(l){var v=l.name;function _(p){var g=p.trans,b=p.type,y=p.keys,w=p.values,m=p.range;return new Promise(function(x,S){x=N(x);var E=g.objectStore(v),D=E.keyPath==null,I=b==="put"||b==="add";if(!I&&b!=="delete"&&b!=="deleteRange")throw new Error("Invalid operation type: "+b);var A=(y||w||{length:1}).length;if(y&&w&&y.length!==w.length)throw new Error("Given keys array must have same length as given values array.");if(A===0)return x({numFailures:0,failures:{},results:[],lastResult:void 0});var R,O=[],M=[],T=0,j=function(re){++T,Xe(re)};if(b==="deleteRange"){if(m.type===4)return x({numFailures:T,failures:M,results:[],lastResult:void 0});m.type===3?O.push(R=E.clear()):O.push(R=E.delete(i(m)))}else{var L=I?D?[w,y]:[w,null]:[y,null],Z=L[0],H=L[1];if(I)for(var q=0;q<A;++q)O.push(R=H&&H[q]!==void 0?E[b](Z[q],H[q]):E[b](Z[q])),R.onerror=j;else for(var q=0;q<A;++q)O.push(R=E[b](Z[q])),R.onerror=j}var me=function(re){var tn=re.target.result;O.forEach(function(ee,Rn){return ee.error!=null&&(M[Rn]=ee.error)}),x({numFailures:T,failures:M,results:b==="delete"?y:O.map(function(ee){return ee.result}),lastResult:tn})};R.onerror=function(re){j(re),me(re)},R.onsuccess=me})}function f(p){var g=p.trans,b=p.values,y=p.query,w=p.reverse,m=p.unique;return new Promise(function(x,S){x=N(x);var E=y.index,D=y.range,I=g.objectStore(v),A=E.isPrimaryKey?I:I.index(E.name),R=w?m?"prevunique":"prev":m?"nextunique":"next",O=b||!("openKeyCursor"in A)?A.openCursor(i(D),R):A.openKeyCursor(i(D),R);O.onerror=te(S),O.onsuccess=N(function(M){var T=O.result;if(!T){x(null);return}T.___id=++bi,T.done=!1;var j=T.continue.bind(T),L=T.continuePrimaryKey;L&&(L=L.bind(T));var Z=T.advance.bind(T),H=function(){throw new Error("Cursor not started")},q=function(){throw new Error("Cursor not stopped")};T.trans=g,T.stop=T.continue=T.continuePrimaryKey=T.advance=H,T.fail=N(S),T.next=function(){var me=this,re=1;return this.start(function(){return re--?me.continue():me.stop()}).then(function(){return me})},T.start=function(me){var re=new Promise(function(ee,Rn){ee=N(ee),O.onerror=te(Rn),T.fail=Rn,T.stop=function(oa){T.stop=T.continue=T.continuePrimaryKey=T.advance=q,ee(oa)}}),tn=function(){if(O.result)try{me()}catch(ee){T.fail(ee)}else T.done=!0,T.start=function(){throw new Error("Cursor behind last entry")},T.stop()};return O.onsuccess=N(function(ee){O.onsuccess=tn,tn()}),T.continue=j,T.continuePrimaryKey=L,T.advance=Z,tn(),re},x(T)},S)})}function d(p){return function(g){return new Promise(function(b,y){b=N(b);var w=g.trans,m=g.values,x=g.limit,S=g.query,E=x===1/0?void 0:x,D=S.index,I=S.range,A=w.objectStore(v),R=D.isPrimaryKey?A:A.index(D.name),O=i(I);if(x===0)return b({result:[]});if(p){var M=m?R.getAll(O,E):R.getAllKeys(O,E);M.onsuccess=function(Z){return b({result:Z.target.result})},M.onerror=te(y)}else{var T=0,j=m||!("openKeyCursor"in R)?R.openCursor(O):R.openKeyCursor(O),L=[];j.onsuccess=function(Z){var H=j.result;if(!H)return b({result:L});if(L.push(m?H.value:H.primaryKey),++T===x)return b({result:L});H.continue()},j.onerror=te(y)}})}}return{name:v,schema:l,mutate:_,getMany:function(p){var g=p.trans,b=p.keys;return new Promise(function(y,w){y=N(y);for(var m=g.objectStore(v),x=b.length,S=new Array(x),E=0,D=0,I,A=function(T){var j=T.target;(S[j._pos]=j.result)!=null,++D===E&&y(S)},R=te(w),O=0;O<x;++O){var M=b[O];M!=null&&(I=m.get(b[O]),I._pos=O,I.onsuccess=A,I.onerror=R,++E)}E===0&&y(S)})},get:function(p){var g=p.trans,b=p.key;return new Promise(function(y,w){y=N(y);var m=g.objectStore(v),x=m.get(b);x.onsuccess=function(S){return y(S.target.result)},x.onerror=te(w)})},query:d(s),openCursor:f,count:function(p){var g=p.query,b=p.trans,y=g.index,w=g.range;return new Promise(function(m,x){var S=b.objectStore(v),E=y.isPrimaryKey?S:S.index(y.name),D=i(w),I=D?E.count(D):E.count();I.onsuccess=N(function(A){return m(A.target.result)}),I.onerror=te(x)})}}}var u=r(e,t),o=u.schema,s=u.hasGetAll,c=o.tables.map(function(l){return a(l)}),h={};return c.forEach(function(l){return h[l.name]=l}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(l){var v=h[l];if(!v)throw new Error("Table '".concat(l,"' not found"));return h[l]},MIN_KEY:-1/0,MAX_KEY:Ze(n),schema:o}}function _i(e,n){return n.reduce(function(t,r){var i=r.create;return C(C({},t),i(t))},e)}function xi(e,n,t,r){var i=t.IDBKeyRange;t.indexedDB;var a=_i(wi(n,i,r),e.dbcore);return{dbcore:a}}function En(e,n){var t=n.db,r=xi(e._middlewares,t,e._deps,n);e.core=r.dbcore,e.tables.forEach(function(i){var a=i.name;e.core.schema.tables.some(function(u){return u.name===a})&&(i.core=e.core.table(a),e[a]instanceof e.Table&&(e[a].core=i.core))})}function Sn(e,n,t,r){t.forEach(function(i){var a=r[i];n.forEach(function(u){var o=Dt(u,i);(!o||"value"in o&&o.value===void 0)&&(u===e.Transaction.prototype||u instanceof e.Transaction?se(u,i,{get:function(){return this.table(i)},set:function(s){Pt(this,i,{value:s,writable:!0,configurable:!0,enumerable:!0})}}):u[i]=new e.Table(i,a))})})}function ct(e,n){n.forEach(function(t){for(var r in t)t[r]instanceof e.Table&&delete t[r]})}function Ei(e,n){return e._cfg.version-n._cfg.version}function Si(e,n,t,r){var i=e._dbSchema;t.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=ot("$meta",lr("")[0],[]),e._storeNames.push("$meta"));var a=e._createTransaction("readwrite",e._storeNames,i);a.create(t),a._completion.catch(r);var u=a._reject.bind(a),o=k.transless||k;le(function(){if(k.trans=a,k.transless=o,n===0)W(i).forEach(function(s){ft(t,s,i[s].primKey,i[s].indexes)}),En(e,t),K.follow(function(){return e.on.populate.fire(a)}).catch(u);else return En(e,t),Ai(e,a,n).then(function(s){return ki(e,s,a,t)}).catch(u)})}function Ki(e,n){cr(e._dbSchema,n),n.db.version%10===0&&!n.objectStoreNames.contains("$meta")&&n.db.createObjectStore("$meta").add(Math.ceil(n.db.version/10-1),"version");var t=An(e,e.idbdb,n);kn(e,e._dbSchema,n);for(var r=lt(t,e._dbSchema),i=function(c){if(c.change.length||c.recreate)return console.warn("Unable to patch indexes of table ".concat(c.name," because it has changes on the type of index or primary key.")),{value:void 0};var h=n.objectStore(c.name);c.add.forEach(function(l){ne&&console.debug("Dexie upgrade patch: Creating missing index ".concat(c.name,".").concat(l.src)),Kn(h,l)})},a=0,u=r.change;a<u.length;a++){var o=u[a],s=i(o);if(typeof s=="object")return s.value}}function Ai(e,n,t){return n.storeNames.includes("$meta")?n.table("$meta").get("version").then(function(r){return r??t}):K.resolve(t)}function ki(e,n,t,r){var i=[],a=e._versions,u=e._dbSchema=An(e,e.idbdb,r),o=a.filter(function(c){return c._cfg.version>=n});if(o.length===0)return K.resolve();o.forEach(function(c){i.push(function(){var h=u,l=c._cfg.dbschema;kn(e,h,r),kn(e,l,r),u=e._dbSchema=l;var v=lt(h,l);v.add.forEach(function(b){ft(r,b[0],b[1].primKey,b[1].indexes)}),v.change.forEach(function(b){if(b.recreate)throw new P.Upgrade("Not yet support for changing primary key");var y=r.objectStore(b.name);b.add.forEach(function(w){return Kn(y,w)}),b.change.forEach(function(w){y.deleteIndex(w.name),Kn(y,w)}),b.del.forEach(function(w){return y.deleteIndex(w)})});var _=c._cfg.contentUpgrade;if(_&&c._cfg.version>n){En(e,r),t._memoizedTables={};var f=It(l);v.del.forEach(function(b){f[b]=h[b]}),ct(e,[e.Transaction.prototype]),Sn(e,[e.Transaction.prototype],W(f),f),t.schema=f;var d=Nn(_);d&&Fe();var p,g=K.follow(function(){if(p=_(t),p&&d){var b=fe.bind(null,null);p.then(b,b)}});return p&&typeof p.then=="function"?K.resolve(p):g.then(function(){return p})}}),i.push(function(h){var l=c._cfg.dbschema;Oi(l,h),ct(e,[e.Transaction.prototype]),Sn(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),t.schema=e._dbSchema}),i.push(function(h){e.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(e.idbdb.version/10)===c._cfg.version?(e.idbdb.deleteObjectStore("$meta"),delete e._dbSchema.$meta,e._storeNames=e._storeNames.filter(function(l){return l!=="$meta"})):h.objectStore("$meta").put(c._cfg.version,"version"))})});function s(){return i.length?K.resolve(i.shift()(t.idbtrans)).then(s):K.resolve()}return s().then(function(){cr(u,r)})}function lt(e,n){var t={del:[],add:[],change:[]},r;for(r in e)n[r]||t.del.push(r);for(r in n){var i=e[r],a=n[r];if(!i)t.add.push([r,a]);else{var u={name:r,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto)u.recreate=!0,t.change.push(u);else{var o=i.idxByName,s=a.idxByName,c=void 0;for(c in o)s[c]||u.del.push(c);for(c in s){var h=o[c],l=s[c];h?h.src!==l.src&&u.change.push(l):u.add.push(l)}(u.del.length>0||u.add.length>0||u.change.length>0)&&t.change.push(u)}}}return t}function ft(e,n,t,r){var i=e.db.createObjectStore(n,t.keyPath?{keyPath:t.keyPath,autoIncrement:t.auto}:{autoIncrement:t.auto});return r.forEach(function(a){return Kn(i,a)}),i}function cr(e,n){W(e).forEach(function(t){n.db.objectStoreNames.contains(t)||(ne&&console.debug("Dexie: Creating missing table",t),ft(n,t,e[t].primKey,e[t].indexes))})}function Oi(e,n){[].slice.call(n.db.objectStoreNames).forEach(function(t){return e[t]==null&&n.db.deleteObjectStore(t)})}function Kn(e,n){e.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multi})}function An(e,n,t){var r={},i=un(n.objectStoreNames,0);return i.forEach(function(a){for(var u=t.objectStore(a),o=u.keyPath,s=ut(or(o),o||"",!0,!1,!!u.autoIncrement,o&&typeof o!="string",!0),c=[],h=0;h<u.indexNames.length;++h){var l=u.index(u.indexNames[h]);o=l.keyPath;var v=ut(l.name,o,!!l.unique,!!l.multiEntry,!1,o&&typeof o!="string",!1);c.push(v)}r[a]=ot(a,s,c)}),r}function Pi(e,n,t){e.verno=n.version/10;var r=e._dbSchema=An(e,n,t);e._storeNames=un(n.objectStoreNames,0),Sn(e,[e._allTables],W(r),r)}function Di(e,n){var t=An(e,e.idbdb,n),r=lt(t,e._dbSchema);return!(r.add.length||r.change.some(function(i){return i.add.length||i.change.length}))}function kn(e,n,t){for(var r=t.db.objectStoreNames,i=0;i<r.length;++i){var a=r[i],u=t.objectStore(a);e._hasGetAll="getAll"in u;for(var o=0;o<u.indexNames.length;++o){var s=u.indexNames[o],c=u.index(s).keyPath,h=typeof c=="string"?c:"["+un(c).join("+")+"]";if(n[a]){var l=n[a].idxByName[h];l&&(l.name=s,delete n[a].idxByName[h],n[a].idxByName[s]=l)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&U.WorkerGlobalScope&&U instanceof U.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function lr(e){return e.split(",").map(function(n,t){var r,i=n.split(":"),a=(r=i[1])===null||r===void 0?void 0:r.trim();n=i[0].trim();var u=n.replace(/([&*]|\+\+)/g,""),o=/^\[/.test(u)?u.match(/^\[(.*)\]$/)[1].split("+"):u;return ut(u,o||null,/\&/.test(n),/\*/.test(n),/\+\+/.test(n),V(o),t===0,a)})}var Ti=(function(){function e(){}return e.prototype._createTableSchema=function(n,t,r){return ot(n,t,r)},e.prototype._parseIndexSyntax=function(n){return lr(n)},e.prototype._parseStoresSpec=function(n,t){var r=this;W(n).forEach(function(i){if(n[i]!==null){var a=r._parseIndexSyntax(n[i]),u=a.shift();if(!u)throw new P.Schema("Invalid schema for table "+i+": "+n[i]);if(u.unique=!0,u.multi)throw new P.Schema("Primary key cannot be multiEntry*");a.forEach(function(s){if(s.auto)throw new P.Schema("Only primary key can be marked as autoIncrement (++)");if(!s.keyPath)throw new P.Schema("Index must have a name and cannot be an empty string")});var o=r._createTableSchema(i,u,a);t[i]=o}})},e.prototype.stores=function(n){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?G(this._cfg.storesSource,n):n;var r=t._versions,i={},a={};return r.forEach(function(u){G(i,u._cfg.storesSource),a=u._cfg.dbschema={},u._parseStoresSpec(i,a)}),t._dbSchema=a,ct(t,[t._allTables,t,t.Transaction.prototype]),Sn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],W(a),a),t._storeNames=W(a),this},e.prototype.upgrade=function(n){return this._cfg.contentUpgrade=Wn(this._cfg.contentUpgrade||F,n),this},e})();function Ci(e){return He(Ti.prototype,function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function ht(e,n){var t=e._dbNamesDB;return t||(t=e._dbNamesDB=new oe(mn,{addons:[],indexedDB:e,IDBKeyRange:n}),t.version(1).stores({dbnames:"name"})),t.table("dbnames")}function dt(e){return e&&typeof e.databases=="function"}function Ii(e){var n=e.indexedDB,t=e.IDBKeyRange;return dt(n)?Promise.resolve(n.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==mn})}):ht(n,t).toCollection().primaryKeys()}function Ri(e,n){var t=e.indexedDB,r=e.IDBKeyRange;!dt(t)&&n!==mn&&ht(t,r).put({name:n}).catch(F)}function Bi(e,n){var t=e.indexedDB,r=e.IDBKeyRange;!dt(t)&&n!==mn&&ht(t,r).delete(n).catch(F)}function vt(e){return le(function(){return k.letThrough=!0,e()})}function Mi(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var n;return new Promise(function(t){var r=function(){return indexedDB.databases().finally(t)};n=setInterval(r,100),r()}).finally(function(){return clearInterval(n)})}var pt;function yt(e){return!("from"in e)}var $=function(e,n){if(this)G(this,arguments.length?{d:1,from:e,to:arguments.length>1?n:e}:{d:0});else{var t=new $;return e&&"d"in e&&G(t,e),t}};De($.prototype,(pt={add:function(e){return nn(this,e),this},addKey:function(e){return en(this,e,e),this},addKeys:function(e){var n=this;return e.forEach(function(t){return en(n,t,t)}),this},hasKey:function(e){var n=On(this).next(e).value;return n&&B(n.from,e)<=0&&B(n.to,e)>=0}},pt[Ln]=function(){return On(this)},pt));function en(e,n,t){var r=B(n,t);if(!isNaN(r)){if(r>0)throw RangeError();if(yt(e))return G(e,{from:n,to:t,d:1});var i=e.l,a=e.r;if(B(t,e.from)<0)return i?en(i,n,t):e.l={from:n,to:t,d:1,l:null,r:null},hr(e);if(B(n,e.to)>0)return a?en(a,n,t):e.r={from:n,to:t,d:1,l:null,r:null},hr(e);B(n,e.from)<0&&(e.from=n,e.l=null,e.d=a?a.d+1:1),B(t,e.to)>0&&(e.to=t,e.r=null,e.d=e.l?e.l.d+1:1);var u=!e.r;i&&!e.l&&nn(e,i),a&&u&&nn(e,a)}}function nn(e,n){function t(r,i){var a=i.from,u=i.to,o=i.l,s=i.r;en(r,a,u),o&&t(r,o),s&&t(r,s)}yt(n)||t(e,n)}function fr(e,n){var t=On(n),r=t.next();if(r.done)return!1;for(var i=r.value,a=On(e),u=a.next(i.from),o=u.value;!r.done&&!u.done;){if(B(o.from,i.to)<=0&&B(o.to,i.from)>=0)return!0;B(i.from,o.from)<0?i=(r=t.next(o.from)).value:o=(u=a.next(i.from)).value}return!1}function On(e){var n=yt(e)?null:{s:0,n:e};return{next:function(t){for(var r=arguments.length>0;n;)switch(n.s){case 0:if(n.s=1,r)for(;n.n.l&&B(t,n.n.from)<0;)n={up:n,n:n.n.l,s:1};else for(;n.n.l;)n={up:n,n:n.n.l,s:1};case 1:if(n.s=2,!r||B(t,n.n.to)<=0)return{value:n.n,done:!1};case 2:if(n.n.r){n.s=3,n={up:n,n:n.n.r,s:0};continue}case 3:n=n.up}return{done:!0}}}}function hr(e){var n,t,r=(((n=e.r)===null||n===void 0?void 0:n.d)||0)-(((t=e.l)===null||t===void 0?void 0:t.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var a=i==="r"?"l":"r",u=C({},e),o=e[i];e.from=o.from,e.to=o.to,e[i]=o[i],u[i]=o[a],e[a]=u,u.d=dr(u)}e.d=dr(e)}function dr(e){var n=e.r,t=e.l;return(n?t?Math.max(n.d,t.d):n.d:t?t.d:0)+1}function Pn(e,n){return W(n).forEach(function(t){e[t]?nn(e[t],n[t]):e[t]=Mt(n[t])}),e}function mt(e,n){return e.all||n.all||Object.keys(e).some(function(t){return n[t]&&fr(n[t],e[t])})}var ke={},gt={},bt=!1;function Dn(e,n){Pn(gt,e),bt||(bt=!0,setTimeout(function(){bt=!1;var t=gt;gt={},wt(t,!1)},0))}function wt(e,n){n===void 0&&(n=!1);var t=new Set;if(e.all)for(var r=0,i=Object.values(ke);r<i.length;r++){var a=i[r];vr(a,e,t,n)}else for(var u in e){var o=/^idb\:\/\/(.*)\/(.*)\//.exec(u);if(o){var s=o[1],c=o[2],a=ke["idb://".concat(s,"/").concat(c)];a&&vr(a,e,t,n)}}t.forEach(function(h){return h()})}function vr(e,n,t,r){for(var i=[],a=0,u=Object.entries(e.queries.query);a<u.length;a++){for(var o=u[a],s=o[0],c=o[1],h=[],l=0,v=c;l<v.length;l++){var _=v[l];mt(n,_.obsSet)?_.subscribers.forEach(function(g){return t.add(g)}):r&&h.push(_)}r&&i.push([s,h])}if(r)for(var f=0,d=i;f<d.length;f++){var p=d[f],s=p[0],h=p[1];e.queries.query[s]=h}}function Fi(e){var n=e._state,t=e._deps.indexedDB;if(n.isBeingOpened||e.idbdb)return n.dbReadyPromise.then(function(){return n.dbOpenError?z(n.dbOpenError):e});n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;var r=n.openCanceller,i=Math.round(e.verno*10),a=!1;function u(){if(n.openCanceller!==r)throw new P.DatabaseClosed("db.open() was cancelled")}var o=n.dbReadyResolve,s=null,c=!1,h=function(){return new K(function(l,v){if(u(),!t)throw new P.MissingAPI;var _=e.name,f=n.autoSchema||!i?t.open(_):t.open(_,i);if(!f)throw new P.MissingAPI;f.onerror=te(v),f.onblocked=N(e._fireOnBlocked),f.onupgradeneeded=N(function(d){if(s=f.transaction,n.autoSchema&&!e._options.allowEmptyDB){f.onerror=Xe,s.abort(),f.result.close();var p=t.deleteDatabase(_);p.onsuccess=p.onerror=N(function(){v(new P.NoSuchDatabase("Database ".concat(_," doesnt exist")))})}else{s.onerror=te(v);var g=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;c=g<1,e.idbdb=f.result,a&&Ki(e,s),Si(e,g/10,s,v)}},v),f.onsuccess=N(function(){s=null;var d=e.idbdb=f.result,p=un(d.objectStoreNames);if(p.length>0)try{var g=d.transaction(mi(p),"readonly");if(n.autoSchema)Pi(e,d,g);else if(kn(e,e._dbSchema,g),!Di(e,g)&&!a)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),d.close(),i=d.version+1,a=!0,l(h());En(e,g)}catch{}je.push(e),d.onversionchange=N(function(b){n.vcFired=!0,e.on("versionchange").fire(b)}),d.onclose=N(function(b){e.on("close").fire(b)}),c&&Ri(e._deps,_),l()},v)}).catch(function(l){switch(l?.name){case"UnknownError":if(n.PR1398_maxLoop>0)return n.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),h();break;case"VersionError":if(i>0)return i=0,h();break}return K.reject(l)})};return K.race([r,(typeof navigator>"u"?K.resolve():Mi()).then(h)]).then(function(){return u(),n.onReadyBeingFired=[],K.resolve(vt(function(){return e.on.ready.fire(e.vip)})).then(function l(){if(n.onReadyBeingFired.length>0){var v=n.onReadyBeingFired.reduce(Wn,F);return n.onReadyBeingFired=[],K.resolve(vt(function(){return v(e.vip)})).then(l)}})}).finally(function(){n.openCanceller===r&&(n.onReadyBeingFired=null,n.isBeingOpened=!1)}).catch(function(l){n.dbOpenError=l;try{s&&s.abort()}catch{}return r===n.openCanceller&&e._close(),z(l)}).finally(function(){n.openComplete=!0,o()}).then(function(){if(c){var l={};e.tables.forEach(function(v){v.schema.indexes.forEach(function(_){_.name&&(l["idb://".concat(e.name,"/").concat(v.name,"/").concat(_.name)]=new $(-1/0,[[[]]]))}),l["idb://".concat(e.name,"/").concat(v.name,"/")]=l["idb://".concat(e.name,"/").concat(v.name,"/:dels")]=new $(-1/0,[[[]]])}),ve(Je).fire(l),wt(l,!0)}return e})}function _t(e){var n=function(u){return e.next(u)},t=function(u){return e.throw(u)},r=a(n),i=a(t);function a(u){return function(o){var s=u(o),c=s.value;return s.done?c:!c||typeof c.then!="function"?V(c)?Promise.all(c).then(r,i):r(c):c.then(r,i)}}return a(n)()}function ji(e,n,t){var r=arguments.length;if(r<2)throw new P.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];t=i.pop();var a=Rt(i);return[e,a,t]}function pr(e,n,t,r,i){return K.resolve().then(function(){var a=k.transless||k,u=e._createTransaction(n,t,e._dbSchema,r);u.explicit=!0;var o={trans:u,transless:a};if(r)u.idbtrans=r.idbtrans;else try{u.create(),u.idbtrans._explicit=!0,e._state.PR1398_maxLoop=3}catch(l){return l.name===zn.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return pr(e,n,t,null,i)})):z(l)}var s=Nn(i);s&&Fe();var c,h=K.follow(function(){if(c=i.call(u,u),c)if(s){var l=fe.bind(null,null);c.then(l,l)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=_t(c))},o);return(c&&typeof c.then=="function"?K.resolve(c).then(function(l){return u.active?l:z(new P.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):h.then(function(){return c})).then(function(l){return r&&u._resolve(),u._completion.then(function(){return l})}).catch(function(l){return u._reject(l),z(l)})})}function Tn(e,n,t){for(var r=V(e)?e.slice():[e],i=0;i<t;++i)r.push(n);return r}function Li(e){return C(C({},e),{table:function(n){var t=e.table(n),r=t.schema,i={},a=[];function u(d,p,g){var b=qe(d),y=i[b]=i[b]||[],w=d==null?0:typeof d=="string"?1:d.length,m=p>0,x=C(C({},g),{name:m?"".concat(b,"(virtual-from:").concat(g.name,")"):g.name,lowLevelIndex:g,isVirtual:m,keyTail:p,keyLength:w,extractKey:st(d),unique:!m&&g.unique});if(y.push(x),x.isPrimaryKey||a.push(x),w>1){var S=w===2?d[0]:d.slice(0,w-1);u(S,p+1,g)}return y.sort(function(E,D){return E.keyTail-D.keyTail}),x}var o=u(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[o];for(var s=0,c=r.indexes;s<c.length;s++){var h=c[s];u(h.keyPath,0,h)}function l(d){var p=i[qe(d)];return p&&p[0]}function v(d,p){return{type:d.type===1?2:d.type,lower:Tn(d.lower,d.lowerOpen?e.MAX_KEY:e.MIN_KEY,p),lowerOpen:!0,upper:Tn(d.upper,d.upperOpen?e.MIN_KEY:e.MAX_KEY,p),upperOpen:!0}}function _(d){var p=d.query.index;return p.isVirtual?C(C({},d),{query:{index:p.lowLevelIndex,range:v(d.query.range,p.keyTail)}}):d}var f=C(C({},t),{schema:C(C({},r),{primaryKey:o,indexes:a,getIndexByKeyPath:l}),count:function(d){return t.count(_(d))},query:function(d){return t.query(_(d))},openCursor:function(d){var p=d.query.index,g=p.keyTail,b=p.isVirtual,y=p.keyLength;if(!b)return t.openCursor(d);function w(m){function x(E){E!=null?m.continue(Tn(E,d.reverse?e.MAX_KEY:e.MIN_KEY,g)):d.unique?m.continue(m.key.slice(0,y).concat(d.reverse?e.MIN_KEY:e.MAX_KEY,g)):m.continue()}var S=Object.create(m,{continue:{value:x},continuePrimaryKey:{value:function(E,D){m.continuePrimaryKey(Tn(E,e.MAX_KEY,g),D)}},primaryKey:{get:function(){return m.primaryKey}},key:{get:function(){var E=m.key;return y===1?E[0]:E.slice(0,y)}},value:{get:function(){return m.value}}});return S}return t.openCursor(_(d)).then(function(m){return m&&w(m)})}});return f}})}var Ni={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Li};function xt(e,n,t,r){return t=t||{},r=r||"",W(e).forEach(function(i){if(!Q(n,i))t[r+i]=void 0;else{var a=e[i],u=n[i];if(typeof a=="object"&&typeof u=="object"&&a&&u){var o=jn(a),s=jn(u);o!==s?t[r+i]=n[i]:o==="Object"?xt(a,u,t,r+i+"."):a!==u&&(t[r+i]=n[i])}else a!==u&&(t[r+i]=n[i])}}),W(n).forEach(function(i){Q(e,i)||(t[r+i]=n[i])}),t}function Et(e,n){return n.type==="delete"?n.keys:n.keys||n.values.map(e.extractKey)}var Vi={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return C(C({},e),{table:function(n){var t=e.table(n),r=t.schema.primaryKey,i=C(C({},t),{mutate:function(a){var u=k.trans,o=u.table(n).hook,s=o.deleting,c=o.creating,h=o.updating;switch(a.type){case"add":if(c.fire===F)break;return u._promise("readwrite",function(){return l(a)},!0);case"put":if(c.fire===F&&h.fire===F)break;return u._promise("readwrite",function(){return l(a)},!0);case"delete":if(s.fire===F)break;return u._promise("readwrite",function(){return l(a)},!0);case"deleteRange":if(s.fire===F)break;return u._promise("readwrite",function(){return v(a)},!0)}return t.mutate(a);function l(f){var d=k.trans,p=f.keys||Et(r,f);if(!p)throw new Error("Keys missing");return f=f.type==="add"||f.type==="put"?C(C({},f),{keys:p}):C({},f),f.type!=="delete"&&(f.values=an([],f.values)),f.keys&&(f.keys=an([],f.keys)),zi(t,f,p).then(function(g){var b=p.map(function(y,w){var m=g[w],x={onerror:null,onsuccess:null};if(f.type==="delete")s.fire.call(x,y,m,d);else if(f.type==="add"||m===void 0){var S=c.fire.call(x,y,f.values[w],d);y==null&&S!=null&&(y=S,f.keys[w]=y,r.outbound||X(f.values[w],r.keyPath,y))}else{var E=xt(m,f.values[w]),D=h.fire.call(x,E,y,m,d);if(D){var I=f.values[w];Object.keys(D).forEach(function(A){Q(I,A)?I[A]=D[A]:X(I,A,D[A])})}}return x});return t.mutate(f).then(function(y){for(var w=y.failures,m=y.results,x=y.numFailures,S=y.lastResult,E=0;E<p.length;++E){var D=m?m[E]:p[E],I=b[E];D==null?I.onerror&&I.onerror(w[E]):I.onsuccess&&I.onsuccess(f.type==="put"&&g[E]?f.values[E]:D)}return{failures:w,results:m,numFailures:x,lastResult:S}}).catch(function(y){return b.forEach(function(w){return w.onerror&&w.onerror(y)}),Promise.reject(y)})})}function v(f){return _(f.trans,f.range,1e4)}function _(f,d,p){return t.query({trans:f,values:!1,query:{index:r,range:d},limit:p}).then(function(g){var b=g.result;return l({type:"delete",keys:b,trans:f}).then(function(y){return y.numFailures>0?Promise.reject(y.failures[0]):b.length<p?{failures:[],numFailures:0,lastResult:void 0}:_(f,C(C({},d),{lower:b[b.length-1],lowerOpen:!0}),p)})})}}});return i}})}};function zi(e,n,t){return n.type==="add"?Promise.resolve([]):e.getMany({trans:n.trans,keys:t,cache:"immutable"})}function yr(e,n,t){try{if(!n||n.keys.length<e.length)return null;for(var r=[],i=0,a=0;i<n.keys.length&&a<e.length;++i)B(n.keys[i],e[a])===0&&(r.push(t?ge(n.values[i]):n.values[i]),++a);return r.length===e.length?r:null}catch{return null}}var Wi={stack:"dbcore",level:-1,create:function(e){return{table:function(n){var t=e.table(n);return C(C({},t),{getMany:function(r){if(!r.cache)return t.getMany(r);var i=yr(r.keys,r.trans._cache,r.cache==="clone");return i?K.resolve(i):t.getMany(r).then(function(a){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?ge(a):a},a})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),t.mutate(r)}})}}}};function mr(e,n){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!n.schema.primaryKey.outbound}function gr(e,n){switch(e){case"query":return n.values&&!n.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Yi={stack:"dbcore",level:0,name:"Observability",create:function(e){var n=e.schema.name,t=new $(e.MIN_KEY,e.MAX_KEY);return C(C({},e),{transaction:function(r,i,a){if(k.subscr&&i!=="readonly")throw new P.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(k.querier));return e.transaction(r,i,a)},table:function(r){var i=e.table(r),a=i.schema,u=a.primaryKey,o=a.indexes,s=u.extractKey,c=u.outbound,h=u.autoIncrement&&o.filter(function(f){return f.compound&&f.keyPath.includes(u.keyPath)}),l=C(C({},i),{mutate:function(f){var d,p,g=f.trans,b=f.mutatedParts||(f.mutatedParts={}),y=function(O){var M="idb://".concat(n,"/").concat(r,"/").concat(O);return b[M]||(b[M]=new $)},w=y(""),m=y(":dels"),x=f.type,S=f.type==="deleteRange"?[f.range]:f.type==="delete"?[f.keys]:f.values.length<50?[Et(u,f).filter(function(O){return O}),f.values]:[],E=S[0],D=S[1],I=f.trans._cache;if(V(E)){w.addKeys(E);var A=x==="delete"||E.length===D.length?yr(E,I):null;A||m.addKeys(E),(A||D)&&Ui(y,a,A,D)}else if(E){var R={from:(d=E.lower)!==null&&d!==void 0?d:e.MIN_KEY,to:(p=E.upper)!==null&&p!==void 0?p:e.MAX_KEY};m.add(R),w.add(R)}else w.add(t),m.add(t),a.indexes.forEach(function(O){return y(O.name).add(t)});return i.mutate(f).then(function(O){return E&&(f.type==="add"||f.type==="put")&&(w.addKeys(O.results),h&&h.forEach(function(M){for(var T=f.values.map(function(H){return M.extractKey(H)}),j=M.keyPath.findIndex(function(H){return H===u.keyPath}),L=0,Z=O.results.length;L<Z;++L)T[L][j]=O.results[L];y(M.name).addKeys(T)})),g.mutatedParts=Pn(g.mutatedParts||{},b),O})}}),v=function(f){var d,p,g=f.query,b=g.index,y=g.range;return[b,new $((d=y.lower)!==null&&d!==void 0?d:e.MIN_KEY,(p=y.upper)!==null&&p!==void 0?p:e.MAX_KEY)]},_={get:function(f){return[u,new $(f.key)]},getMany:function(f){return[u,new $().addKeys(f.keys)]},count:v,query:v,openCursor:v};return W(_).forEach(function(f){l[f]=function(d){var p=k.subscr,g=!!p,b=mr(k,i)&&gr(f,d),y=b?d.obsSet={}:p;if(g){var w=function(A){var R="idb://".concat(n,"/").concat(r,"/").concat(A);return y[R]||(y[R]=new $)},m=w(""),x=w(":dels"),S=_[f](d),E=S[0],D=S[1];if(f==="query"&&E.isPrimaryKey&&!d.values?x.add(D):w(E.name||"").add(D),!E.isPrimaryKey)if(f==="count")x.add(t);else{var I=f==="query"&&c&&d.values&&i.query(C(C({},d),{values:!1}));return i[f].apply(this,arguments).then(function(A){if(f==="query"){if(c&&d.values)return I.then(function(T){var j=T.result;return m.addKeys(j),A});var R=d.values?A.result.map(s):A.result;d.values?m.addKeys(R):x.addKeys(R)}else if(f==="openCursor"){var O=A,M=d.values;return O&&Object.create(O,{key:{get:function(){return x.addKey(O.primaryKey),O.key}},primaryKey:{get:function(){var T=O.primaryKey;return x.addKey(T),T}},value:{get:function(){return M&&m.addKey(O.primaryKey),O.value}}})}return A})}}return i[f].apply(this,arguments)}}),l}})}};function Ui(e,n,t,r){function i(a){var u=e(a.name||"");function o(c){return c!=null?a.extractKey(c):null}var s=function(c){return a.multiEntry&&V(c)?c.forEach(function(h){return u.addKey(h)}):u.addKey(c)};(t||r).forEach(function(c,h){var l=t&&o(t[h]),v=r&&o(r[h]);B(l,v)!==0&&(l!=null&&s(l),v!=null&&s(v))})}n.indexes.forEach(i)}function br(e,n,t){if(t.numFailures===0)return n;if(n.type==="deleteRange")return null;var r=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;if(t.numFailures===r)return null;var i=C({},n);return V(i.keys)&&(i.keys=i.keys.filter(function(a,u){return!(u in t.failures)})),"values"in i&&V(i.values)&&(i.values=i.values.filter(function(a,u){return!(u in t.failures)})),i}function $i(e,n){return n.lower===void 0?!0:n.lowerOpen?B(e,n.lower)>0:B(e,n.lower)>=0}function Qi(e,n){return n.upper===void 0?!0:n.upperOpen?B(e,n.upper)<0:B(e,n.upper)<=0}function St(e,n){return $i(e,n)&&Qi(e,n)}function wr(e,n,t,r,i,a){if(!t||t.length===0)return e;var u=n.query.index,o=u.multiEntry,s=n.query.range,c=r.schema.primaryKey,h=c.extractKey,l=u.extractKey,v=(u.lowLevelIndex||u).extractKey,_=t.reduce(function(f,d){var p=f,g=[];if(d.type==="add"||d.type==="put")for(var b=new $,y=d.values.length-1;y>=0;--y){var w=d.values[y],m=h(w);if(!b.hasKey(m)){var x=l(w);(o&&V(x)?x.some(function(A){return St(A,s)}):St(x,s))&&(b.addKey(m),g.push(w))}}switch(d.type){case"add":{var S=new $().addKeys(n.values?f.map(function(A){return h(A)}):f);p=f.concat(n.values?g.filter(function(A){var R=h(A);return S.hasKey(R)?!1:(S.addKey(R),!0)}):g.map(function(A){return h(A)}).filter(function(A){return S.hasKey(A)?!1:(S.addKey(A),!0)}));break}case"put":{var E=new $().addKeys(d.values.map(function(A){return h(A)}));p=f.filter(function(A){return!E.hasKey(n.values?h(A):A)}).concat(n.values?g:g.map(function(A){return h(A)}));break}case"delete":var D=new $().addKeys(d.keys);p=f.filter(function(A){return!D.hasKey(n.values?h(A):A)});break;case"deleteRange":var I=d.range;p=f.filter(function(A){return!St(h(A),I)});break}return p},e);return _===e?e:(_.sort(function(f,d){return B(v(f),v(d))||B(h(f),h(d))}),n.limit&&n.limit<1/0&&(_.length>n.limit?_.length=n.limit:e.length===n.limit&&_.length<n.limit&&(i.dirty=!0)),a?Object.freeze(_):_)}function _r(e,n){return B(e.lower,n.lower)===0&&B(e.upper,n.upper)===0&&!!e.lowerOpen==!!n.lowerOpen&&!!e.upperOpen==!!n.upperOpen}function Hi(e,n,t,r){if(e===void 0)return n!==void 0?-1:0;if(n===void 0)return 1;var i=B(e,n);if(i===0){if(t&&r)return 0;if(t)return 1;if(r)return-1}return i}function Gi(e,n,t,r){if(e===void 0)return n!==void 0?1:0;if(n===void 0)return-1;var i=B(e,n);if(i===0){if(t&&r)return 0;if(t)return-1;if(r)return 1}return i}function Xi(e,n){return Hi(e.lower,n.lower,e.lowerOpen,n.lowerOpen)<=0&&Gi(e.upper,n.upper,e.upperOpen,n.upperOpen)>=0}function Ji(e,n,t,r){var i=ke["idb://".concat(e,"/").concat(n)];if(!i)return[];var a=i.queries[t];if(!a)return[null,!1,i,null];var u=r.query?r.query.index.name:null,o=a[u||""];if(!o)return[null,!1,i,null];switch(t){case"query":var s=o.find(function(l){return l.req.limit===r.limit&&l.req.values===r.values&&_r(l.req.query.range,r.query.range)});if(s)return[s,!0,i,o];var c=o.find(function(l){var v="limit"in l.req?l.req.limit:1/0;return v>=r.limit&&(r.values?l.req.values:!0)&&Xi(l.req.query.range,r.query.range)});return[c,!1,i,o];case"count":var h=o.find(function(l){return _r(l.req.query.range,r.query.range)});return[h,!!h,i,o]}}function Zi(e,n,t,r){e.subscribers.add(t),r.addEventListener("abort",function(){e.subscribers.delete(t),e.subscribers.size===0&&qi(e,n)})}function qi(e,n){setTimeout(function(){e.subscribers.size===0&&be(n,e)},3e3)}var ea={stack:"dbcore",level:0,name:"Cache",create:function(e){var n=e.schema.name,t=C(C({},e),{transaction:function(r,i,a){var u=e.transaction(r,i,a);if(i==="readwrite"){var o=new AbortController,s=o.signal,c=function(h){return function(){if(o.abort(),i==="readwrite"){for(var l=new Set,v=0,_=r;v<_.length;v++){var f=_[v],d=ke["idb://".concat(n,"/").concat(f)];if(d){var p=e.table(f),g=d.optimisticOps.filter(function(M){return M.trans===u});if(u._explicit&&h&&u.mutatedParts)for(var b=0,y=Object.values(d.queries.query);b<y.length;b++)for(var w=y[b],m=0,x=w.slice();m<x.length;m++){var S=x[m];mt(S.obsSet,u.mutatedParts)&&(be(w,S),S.subscribers.forEach(function(M){return l.add(M)}))}else if(g.length>0){d.optimisticOps=d.optimisticOps.filter(function(M){return M.trans!==u});for(var E=0,D=Object.values(d.queries.query);E<D.length;E++)for(var w=D[E],I=0,A=w.slice();I<A.length;I++){var S=A[I];if(S.res!=null&&u.mutatedParts)if(h&&!S.dirty){var R=Object.isFrozen(S.res),O=wr(S.res,S.req,g,p,S,R);S.dirty?(be(w,S),S.subscribers.forEach(function(j){return l.add(j)})):O!==S.res&&(S.res=O,S.promise=K.resolve({result:O}))}else S.dirty&&be(w,S),S.subscribers.forEach(function(j){return l.add(j)})}}}}l.forEach(function(M){return M()})}}};u.addEventListener("abort",c(!1),{signal:s}),u.addEventListener("error",c(!1),{signal:s}),u.addEventListener("complete",c(!0),{signal:s})}return u},table:function(r){var i=e.table(r),a=i.schema.primaryKey,u=C(C({},i),{mutate:function(o){var s=k.trans;if(a.outbound||s.db._options.cache==="disabled"||s.explicit||s.idbtrans.mode!=="readwrite")return i.mutate(o);var c=ke["idb://".concat(n,"/").concat(r)];if(!c)return i.mutate(o);var h=i.mutate(o);return(o.type==="add"||o.type==="put")&&(o.values.length>=50||Et(a,o).some(function(l){return l==null}))?h.then(function(l){var v=C(C({},o),{values:o.values.map(function(f,d){var p;if(l.failures[d])return f;var g=!((p=a.keyPath)===null||p===void 0)&&p.includes(".")?ge(f):C({},f);return X(g,a.keyPath,l.results[d]),g})}),_=br(c,v,l);c.optimisticOps.push(_),queueMicrotask(function(){return o.mutatedParts&&Dn(o.mutatedParts)})}):(c.optimisticOps.push(o),o.mutatedParts&&Dn(o.mutatedParts),h.then(function(l){if(l.numFailures>0){be(c.optimisticOps,o);var v=br(c,o,l);v&&c.optimisticOps.push(v),o.mutatedParts&&Dn(o.mutatedParts)}}),h.catch(function(){be(c.optimisticOps,o),o.mutatedParts&&Dn(o.mutatedParts)})),h},query:function(o){var s;if(!mr(k,i)||!gr("query",o))return i.query(o);var c=((s=k.trans)===null||s===void 0?void 0:s.db._options.cache)==="immutable",h=k,l=h.requery,v=h.signal,_=Ji(n,r,"query",o),f=_[0],d=_[1],p=_[2],g=_[3];if(f&&d)f.obsSet=o.obsSet;else{var b=i.query(o).then(function(y){var w=y.result;if(f&&(f.res=w),c){for(var m=0,x=w.length;m<x;++m)Object.freeze(w[m]);Object.freeze(w)}else y.result=ge(w);return y}).catch(function(y){return g&&f&&be(g,f),Promise.reject(y)});f={obsSet:o.obsSet,promise:b,subscribers:new Set,type:"query",req:o,dirty:!1},g?g.push(f):(g=[f],p||(p=ke["idb://".concat(n,"/").concat(r)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),p.queries.query[o.query.index.name||""]=g)}return Zi(f,g,l,v),f.promise.then(function(y){return{result:wr(y.result,o,p?.optimisticOps,i,f,c)}})}});return u}});return t}};function Cn(e,n){return new Proxy(e,{get:function(t,r,i){return r==="db"?n:Reflect.get(t,r,i)}})}var oe=(function(){function e(n,t){var r=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=t=C({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};var a=t.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var u={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:F,dbReadyPromise:null,cancelOpen:F,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};u.dbReadyPromise=new K(function(s){u.dbReadyResolve=s}),u.openCanceller=new K(function(s,c){u.cancelOpen=c}),this._state=u,this.name=n,this.on=Qe(this,"populate","blocked","versionchange","close",{ready:[Wn,F]}),this.once=function(s,c){var h=function(){for(var l=[],v=0;v<arguments.length;v++)l[v]=arguments[v];r.on(s).unsubscribe(h),c.apply(r,l)};return r.on(s,h)},this.on.ready.subscribe=Tt(this.on.ready.subscribe,function(s){return function(c,h){e.vip(function(){var l=r._state;if(l.openComplete)l.dbOpenError||K.resolve().then(c),h&&s(c);else if(l.onReadyBeingFired)l.onReadyBeingFired.push(c),h&&s(c);else{s(c);var v=r;h||s(function _(){v.on.ready.unsubscribe(c),v.on.ready.unsubscribe(_)})}})}}),this.Collection=si(this),this.Table=ai(this),this.Transaction=yi(this),this.Version=Ci(this),this.WhereClause=vi(this),this.on("versionchange",function(s){s.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(r.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(r.name,"'. Closing db now to resume the delete request.")),r.close({disableAutoOpen:!1})}),this.on("blocked",function(s){!s.newVersion||s.newVersion<s.oldVersion?console.warn("Dexie.delete('".concat(r.name,"') was blocked")):console.warn("Upgrade '".concat(r.name,"' blocked by other connection holding version ").concat(s.oldVersion/10))}),this._maxKey=Ze(t.IDBKeyRange),this._createTransaction=function(s,c,h,l){return new r.Transaction(s,c,h,r._options.chromeTransactionDurability,l)},this._fireOnBlocked=function(s){r.on("blocked").fire(s),je.filter(function(c){return c.name===r.name&&c!==r&&!c._state.vcFired}).map(function(c){return c.on("versionchange").fire(s)})},this.use(Wi),this.use(ea),this.use(Yi),this.use(Ni),this.use(Vi);var o=new Proxy(this,{get:function(s,c,h){if(c==="_vip")return!0;if(c==="table")return function(v){return Cn(r.table(v),o)};var l=Reflect.get(s,c,h);return l instanceof nr?Cn(l,o):c==="tables"?l.map(function(v){return Cn(v,o)}):c==="_createTransaction"?function(){var v=l.apply(this,arguments);return Cn(v,o)}:l}});this.vip=o,a.forEach(function(s){return s(r)})}return e.prototype.version=function(n){if(isNaN(n)||n<.1)throw new P.Type("Given version is not a positive number");if(n=Math.round(n*10)/10,this.idbdb||this._state.isBeingOpened)throw new P.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,n);var t=this._versions,r=t.filter(function(i){return i._cfg.version===n})[0];return r||(r=new this.Version(n),t.push(r),t.sort(Ei),r.stores({}),this._state.autoSchema=!1,r)},e.prototype._whenReady=function(n){var t=this;return this.idbdb&&(this._state.openComplete||k.letThrough||this._vip)?n():new K(function(r,i){if(t._state.openComplete)return i(new P.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen){i(new P.DatabaseClosed);return}t.open().catch(F)}t._state.dbReadyPromise.then(r,i)}).then(n)},e.prototype.use=function(n){var t=n.stack,r=n.create,i=n.level,a=n.name;a&&this.unuse({stack:t,name:a});var u=this._middlewares[t]||(this._middlewares[t]=[]);return u.push({stack:t,create:r,level:i??10,name:a}),u.sort(function(o,s){return o.level-s.level}),this},e.prototype.unuse=function(n){var t=n.stack,r=n.name,i=n.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(a){return i?a.create!==i:r?a.name!==r:!1})),this},e.prototype.open=function(){var n=this;return Se(ce,function(){return Fi(n)})},e.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var n=this._state,t=je.indexOf(this);if(t>=0&&je.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}n.isBeingOpened||(n.dbReadyPromise=new K(function(r){n.dbReadyResolve=r}),n.openCanceller=new K(function(r,i){n.cancelOpen=i}))},e.prototype.close=function(n){var t=n===void 0?{disableAutoOpen:!0}:n,r=t.disableAutoOpen,i=this._state;r?(i.isBeingOpened&&i.cancelOpen(new P.DatabaseClosed),this._close(),i.autoOpen=!1,i.dbOpenError=new P.DatabaseClosed):(this._close(),i.autoOpen=this._options.autoOpen||i.isBeingOpened,i.openComplete=!1,i.dbOpenError=null)},e.prototype.delete=function(n){var t=this;n===void 0&&(n={disableAutoOpen:!0});var r=arguments.length>0&&typeof arguments[0]!="object",i=this._state;return new K(function(a,u){var o=function(){t.close(n);var s=t._deps.indexedDB.deleteDatabase(t.name);s.onsuccess=N(function(){Bi(t._deps,t.name),a()}),s.onerror=te(u),s.onblocked=t._fireOnBlocked};if(r)throw new P.InvalidArgument("Invalid closeOptions argument to db.delete()");i.isBeingOpened?i.dbReadyPromise.then(o):o()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var n=this._state.dbOpenError;return n&&n.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var n=this;return W(this._allTables).map(function(t){return n._allTables[t]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var n=ji.apply(this,arguments);return this._transaction.apply(this,n)},e.prototype._transaction=function(n,t,r){var i=this,a=k.trans;(!a||a.db!==this||n.indexOf("!")!==-1)&&(a=null);var u=n.indexOf("?")!==-1;n=n.replace("!","").replace("?","");var o,s;try{if(s=t.map(function(h){var l=h instanceof i.Table?h.name:h;if(typeof l!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return l}),n=="r"||n===nt)o=nt;else if(n=="rw"||n==tt)o=tt;else throw new P.InvalidArgument("Invalid transaction mode: "+n);if(a){if(a.mode===nt&&o===tt)if(u)a=null;else throw new P.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a&&s.forEach(function(h){if(a&&a.storeNames.indexOf(h)===-1)if(u)a=null;else throw new P.SubTransaction("Table "+h+" not included in parent transaction.")}),u&&a&&!a.active&&(a=null)}}catch(h){return a?a._promise(null,function(l,v){v(h)}):z(h)}var c=pr.bind(null,this,o,s,a,r);return a?a._promise(o,c,"lock"):k.trans?Se(k.transless,function(){return i._whenReady(c)}):this._whenReady(c)},e.prototype.table=function(n){if(!Q(this._allTables,n))throw new P.InvalidTable("Table ".concat(n," does not exist"));return this._allTables[n]},e})(),na=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",ta=(function(){function e(n){this._subscribe=n}return e.prototype.subscribe=function(n,t,r){return this._subscribe(!n||typeof n=="function"?{next:n,error:t,complete:r}:n)},e.prototype[na]=function(){return this},e})(),In;try{In={indexedDB:U.indexedDB||U.mozIndexedDB||U.webkitIndexedDB||U.msIndexedDB,IDBKeyRange:U.IDBKeyRange||U.webkitIDBKeyRange}}catch{In={indexedDB:null,IDBKeyRange:null}}function xr(e){var n=!1,t,r=new ta(function(i){var a=Nn(e);function u(g){var b=Be();try{a&&Fe();var y=le(e,g);return a&&(y=y.finally(fe)),y}finally{b&&Me()}}var o=!1,s,c={},h={},l={get closed(){return o},unsubscribe:function(){o||(o=!0,s&&s.abort(),v&&ve.storagemutated.unsubscribe(d))}};i.start&&i.start(l);var v=!1,_=function(){return Zn(p)};function f(){return mt(h,c)}var d=function(g){Pn(c,g),f()&&_()},p=function(){if(!(o||!In.indexedDB)){c={};var g={};s&&s.abort(),s=new AbortController;var b={subscr:g,signal:s.signal,requery:_,querier:e,trans:null},y=u(b);Promise.resolve(y).then(function(w){n=!0,t=w,!(o||b.signal.aborted)&&(c={},h=g,!Ir(h)&&!v&&(ve(Je,d),v=!0),Zn(function(){return!o&&i.next&&i.next(w)}))},function(w){n=!1,["DatabaseClosedError","AbortError"].includes(w?.name)||o||Zn(function(){o||i.error&&i.error(w)})})}};return setTimeout(_,0),l});return r.hasValue=function(){return n},r.getValue=function(){return t},r}var Oe=oe;De(Oe,C(C({},sn),{delete:function(e){var n=new Oe(e,{addons:[]});return n.delete()},exists:function(e){return new Oe(e,{addons:[]}).open().then(function(n){return n.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return Ii(Oe.dependencies).then(e)}catch{return z(new P.MissingAPI)}},defineClass:function(){function e(n){G(this,n)}return e},ignoreTransaction:function(e){return k.trans?Se(k.transless,e):e()},vip:vt,async:function(e){return function(){try{var n=_t(e.apply(this,arguments));return!n||typeof n.then!="function"?K.resolve(n):n}catch(t){return z(t)}}},spawn:function(e,n,t){try{var r=_t(e.apply(t,n||[]));return!r||typeof r.then!="function"?K.resolve(r):r}catch(i){return z(i)}},currentTransaction:{get:function(){return k.trans||null}},waitFor:function(e,n){var t=K.resolve(typeof e=="function"?Oe.ignoreTransaction(e):e).timeout(n||6e4);return k.trans?k.trans.waitFor(t):t},Promise:K,debug:{get:function(){return ne},set:function(e){Nt(e)}},derive:Te,extend:G,props:De,override:Tt,Events:Qe,on:ve,liveQuery:xr,extendObservabilitySet:Pn,getByKeyPath:ie,setByKeyPath:X,delByKeyPath:Dr,shallowClone:It,deepClone:ge,getObjectDiff:xt,cmp:B,asap:Ct,minKey:et,addons:[],connections:je,errnames:zn,dependencies:In,cache:ke,semVer:Gt,version:Gt.split(".").map(function(e){return parseInt(e)}).reduce(function(e,n,t){return e+n/Math.pow(10,t*2)})})),Oe.maxKey=Ze(Oe.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ve(Je,function(e){if(!pe){var n;n=new CustomEvent(at,{detail:e}),pe=!0,dispatchEvent(n),pe=!1}}),addEventListener(at,function(e){var n=e.detail;pe||Kt(n)}));function Kt(e){var n=pe;try{pe=!0,ve.storagemutated.fire(e),wt(e,!0)}finally{pe=n}}var pe=!1,ye,At=function(){};typeof BroadcastChannel<"u"&&(At=function(){ye=new BroadcastChannel(at),ye.onmessage=function(e){return e.data&&Kt(e.data)}},At(),typeof ye.unref=="function"&&ye.unref(),ve(Je,function(e){pe||ye.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!oe.disableBfCache&&e.persisted){ne&&console.debug("Dexie: handling persisted pagehide"),ye?.close();for(var n=0,t=je;n<t.length;n++){var r=t[n];r.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(e){!oe.disableBfCache&&e.persisted&&(ne&&console.debug("Dexie: handling persisted pageshow"),At(),Kt({all:new $(-1/0,[[]])}))}));function ra(e){return new Ge({add:e})}function ia(e){return new Ge({remove:e})}function aa(e,n){return new Ge({replacePrefix:[e,n]})}K.rejectionMapper=Lr,Nt(ne);var ua=Object.freeze({__proto__:null,Dexie:oe,liveQuery:xr,Entity:Zt,cmp:B,PropModification:Ge,replacePrefix:aa,add:ra,remove:ia,default:oe,RangeSet:$,mergeRanges:nn,rangesOverlap:fr});return C(oe,ua,{default:oe}),oe}))})(Bn)),Bn.exports}var ha=fa();const kt=ca(ha),Sr=Symbol.for("Dexie"),Ot=globalThis[Sr]||(globalThis[Sr]=kt);if(kt.semVer!==Ot.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${kt.semVer} and ${Ot.semVer}`);const{liveQuery:pa,mergeRanges:ya,rangesOverlap:ma,RangeSet:ga,cmp:ba,Entity:wa,PropModification:_a,replacePrefix:xa,add:Ea,remove:Sa,DexieYProvider:Ka}=Ot;export{Ot as D};
//# sourceMappingURL=db-BrHWLDeH.js.map
